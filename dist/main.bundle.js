!function(e){var t={};function i(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=t,i.d=function(e,t,o){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(o,n,function(t){return e[t]}.bind(null,n));return o},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="dist/",i(i.s=9)}([function(e,t,i){(function(t){e.exports=function e(t,i,o){function n(r,a){if(!i[r]){if(!t[r]){if(s)return s(r,!0);var l=new Error("Cannot find module '"+r+"'");throw l.code="MODULE_NOT_FOUND",l}var c=i[r]={exports:{}};t[r][0].call(c.exports,(function(e){return n(t[r][1][e]||e)}),c,c.exports,e,t,i,o)}return i[r].exports}for(var s=!1,r=0;r<o.length;r++)n(o[r]);return n}({1:[function(e,t,i){var o={};t.exports=o;var n=e("../geometry/Vertices"),s=e("../geometry/Vector"),r=e("../core/Sleeping"),a=(e("../render/Render"),e("../core/Common")),l=e("../geometry/Bounds"),c=e("../geometry/Axes");!function(){o._inertiaScale=4,o._nextCollidingGroupId=1,o._nextNonCollidingGroupId=-1,o._nextCategory=1,o.create=function(t){var i={id:a.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:n.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"),position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,render:{visible:!0,opacity:1,sprite:{xScale:1,yScale:1,xOffset:0,yOffset:0},lineWidth:0}},o=a.extend(i,t);return e(o,t),o},o.nextGroup=function(e){return e?o._nextNonCollidingGroupId--:o._nextCollidingGroupId++},o.nextCategory=function(){return o._nextCategory=o._nextCategory<<1,o._nextCategory};var e=function(e,t){t=t||{},o.set(e,{bounds:e.bounds||l.create(e.vertices),positionPrev:e.positionPrev||s.clone(e.position),anglePrev:e.anglePrev||e.angle,vertices:e.vertices,parts:e.parts||[e],isStatic:e.isStatic,isSleeping:e.isSleeping,parent:e.parent||e}),n.rotate(e.vertices,e.angle,e.position),c.rotate(e.axes,e.angle),l.update(e.bounds,e.vertices,e.velocity),o.set(e,{axes:t.axes||e.axes,area:t.area||e.area,mass:t.mass||e.mass,inertia:t.inertia||e.inertia});var i=e.isStatic?"#2e2b44":a.choose(["#006BA6","#0496FF","#FFBC42","#D81159","#8F2D56"]);e.render.fillStyle=e.render.fillStyle||i,e.render.strokeStyle=e.render.strokeStyle||"#000",e.render.sprite.xOffset+=-(e.bounds.min.x-e.position.x)/(e.bounds.max.x-e.bounds.min.x),e.render.sprite.yOffset+=-(e.bounds.min.y-e.position.y)/(e.bounds.max.y-e.bounds.min.y)};o.set=function(e,t,i){var n;for(n in"string"==typeof t&&(n=t,(t={})[n]=i),t)if(i=t[n],t.hasOwnProperty(n))switch(n){case"isStatic":o.setStatic(e,i);break;case"isSleeping":r.set(e,i);break;case"mass":o.setMass(e,i);break;case"density":o.setDensity(e,i);break;case"inertia":o.setInertia(e,i);break;case"vertices":o.setVertices(e,i);break;case"position":o.setPosition(e,i);break;case"angle":o.setAngle(e,i);break;case"velocity":o.setVelocity(e,i);break;case"angularVelocity":o.setAngularVelocity(e,i);break;case"parts":o.setParts(e,i);break;default:e[n]=i}},o.setStatic=function(e,t){for(var i=0;i<e.parts.length;i++){var o=e.parts[i];o.isStatic=t,t?(o._original={restitution:o.restitution,friction:o.friction,mass:o.mass,inertia:o.inertia,density:o.density,inverseMass:o.inverseMass,inverseInertia:o.inverseInertia},o.restitution=0,o.friction=1,o.mass=o.inertia=o.density=1/0,o.inverseMass=o.inverseInertia=0,o.positionPrev.x=o.position.x,o.positionPrev.y=o.position.y,o.anglePrev=o.angle,o.angularVelocity=0,o.speed=0,o.angularSpeed=0,o.motion=0):o._original&&(o.restitution=o._original.restitution,o.friction=o._original.friction,o.mass=o._original.mass,o.inertia=o._original.inertia,o.density=o._original.density,o.inverseMass=o._original.inverseMass,o.inverseInertia=o._original.inverseInertia,delete o._original)}},o.setMass=function(e,t){var i=e.inertia/(e.mass/6);e.inertia=i*(t/6),e.inverseInertia=1/e.inertia,e.mass=t,e.inverseMass=1/e.mass,e.density=e.mass/e.area},o.setDensity=function(e,t){o.setMass(e,t*e.area),e.density=t},o.setInertia=function(e,t){e.inertia=t,e.inverseInertia=1/e.inertia},o.setVertices=function(e,t){t[0].body===e?e.vertices=t:e.vertices=n.create(t,e),e.axes=c.fromVertices(e.vertices),e.area=n.area(e.vertices),o.setMass(e,e.density*e.area);var i=n.centre(e.vertices);n.translate(e.vertices,i,-1),o.setInertia(e,o._inertiaScale*n.inertia(e.vertices,e.mass)),n.translate(e.vertices,e.position),l.update(e.bounds,e.vertices,e.velocity)},o.setParts=function(e,t,i){var s;for(t=t.slice(0),e.parts.length=0,e.parts.push(e),e.parent=e,s=0;s<t.length;s++){var r=t[s];r!==e&&(r.parent=e,e.parts.push(r))}if(1!==e.parts.length){if(i=void 0===i||i){var a=[];for(s=0;s<t.length;s++)a=a.concat(t[s].vertices);n.clockwiseSort(a);var l=n.hull(a),c=n.centre(l);o.setVertices(e,l),n.translate(e.vertices,c)}var d=o._totalProperties(e);e.area=d.area,e.parent=e,e.position.x=d.centre.x,e.position.y=d.centre.y,e.positionPrev.x=d.centre.x,e.positionPrev.y=d.centre.y,o.setMass(e,d.mass),o.setInertia(e,d.inertia),o.setPosition(e,d.centre)}},o.setPosition=function(e,t){var i=s.sub(t,e.position);e.positionPrev.x+=i.x,e.positionPrev.y+=i.y;for(var o=0;o<e.parts.length;o++){var r=e.parts[o];r.position.x+=i.x,r.position.y+=i.y,n.translate(r.vertices,i),l.update(r.bounds,r.vertices,e.velocity)}},o.setAngle=function(e,t){var i=t-e.angle;e.anglePrev+=i;for(var o=0;o<e.parts.length;o++){var r=e.parts[o];r.angle+=i,n.rotate(r.vertices,i,e.position),c.rotate(r.axes,i),l.update(r.bounds,r.vertices,e.velocity),o>0&&s.rotateAbout(r.position,i,e.position,r.position)}},o.setVelocity=function(e,t){e.positionPrev.x=e.position.x-t.x,e.positionPrev.y=e.position.y-t.y,e.velocity.x=t.x,e.velocity.y=t.y,e.speed=s.magnitude(e.velocity)},o.setAngularVelocity=function(e,t){e.anglePrev=e.angle-t,e.angularVelocity=t,e.angularSpeed=Math.abs(e.angularVelocity)},o.translate=function(e,t){o.setPosition(e,s.add(e.position,t))},o.rotate=function(e,t,i){if(i){var n=Math.cos(t),s=Math.sin(t),r=e.position.x-i.x,a=e.position.y-i.y;o.setPosition(e,{x:i.x+(r*n-a*s),y:i.y+(r*s+a*n)}),o.setAngle(e,e.angle+t)}else o.setAngle(e,e.angle+t)},o.scale=function(e,t,i,s){var r=0,a=0;s=s||e.position;for(var d=0;d<e.parts.length;d++){var h=e.parts[d];n.scale(h.vertices,t,i,s),h.axes=c.fromVertices(h.vertices),h.area=n.area(h.vertices),o.setMass(h,e.density*h.area),n.translate(h.vertices,{x:-h.position.x,y:-h.position.y}),o.setInertia(h,o._inertiaScale*n.inertia(h.vertices,h.mass)),n.translate(h.vertices,{x:h.position.x,y:h.position.y}),d>0&&(r+=h.area,a+=h.inertia),h.position.x=s.x+(h.position.x-s.x)*t,h.position.y=s.y+(h.position.y-s.y)*i,l.update(h.bounds,h.vertices,e.velocity)}e.parts.length>1&&(e.area=r,e.isStatic||(o.setMass(e,e.density*r),o.setInertia(e,a))),e.circleRadius&&(t===i?e.circleRadius*=t:e.circleRadius=null)},o.update=function(e,t,i,o){var r=Math.pow(t*i*e.timeScale,2),a=1-e.frictionAir*i*e.timeScale,d=e.position.x-e.positionPrev.x,h=e.position.y-e.positionPrev.y;e.velocity.x=d*a*o+e.force.x/e.mass*r,e.velocity.y=h*a*o+e.force.y/e.mass*r,e.positionPrev.x=e.position.x,e.positionPrev.y=e.position.y,e.position.x+=e.velocity.x,e.position.y+=e.velocity.y,e.angularVelocity=(e.angle-e.anglePrev)*a*o+e.torque/e.inertia*r,e.anglePrev=e.angle,e.angle+=e.angularVelocity,e.speed=s.magnitude(e.velocity),e.angularSpeed=Math.abs(e.angularVelocity);for(var u=0;u<e.parts.length;u++){var p=e.parts[u];n.translate(p.vertices,e.velocity),u>0&&(p.position.x+=e.velocity.x,p.position.y+=e.velocity.y),0!==e.angularVelocity&&(n.rotate(p.vertices,e.angularVelocity,e.position),c.rotate(p.axes,e.angularVelocity),u>0&&s.rotateAbout(p.position,e.angularVelocity,e.position,p.position)),l.update(p.bounds,p.vertices,e.velocity)}},o.applyForce=function(e,t,i){e.force.x+=i.x,e.force.y+=i.y;var o=t.x-e.position.x,n=t.y-e.position.y;e.torque+=o*i.y-n*i.x},o._totalProperties=function(e){for(var t={mass:0,area:0,inertia:0,centre:{x:0,y:0}},i=1===e.parts.length?0:1;i<e.parts.length;i++){var o=e.parts[i],n=o.mass!==1/0?o.mass:1;t.mass+=n,t.area+=o.area,t.inertia+=o.inertia,t.centre=s.add(t.centre,s.mult(o.position,n))}return t.centre=s.div(t.centre,t.mass),t}}()},{"../core/Common":14,"../core/Sleeping":22,"../geometry/Axes":25,"../geometry/Bounds":26,"../geometry/Vector":28,"../geometry/Vertices":29,"../render/Render":31}],2:[function(e,t,i){var o={};t.exports=o;var n=e("../core/Events"),s=e("../core/Common"),r=e("../geometry/Bounds"),a=e("./Body");o.create=function(e){return s.extend({id:s.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{}},e)},o.setModified=function(e,t,i,n){if(e.isModified=t,i&&e.parent&&o.setModified(e.parent,t,i,n),n)for(var s=0;s<e.composites.length;s++){var r=e.composites[s];o.setModified(r,t,i,n)}},o.add=function(e,t){var i=[].concat(t);n.trigger(e,"beforeAdd",{object:t});for(var r=0;r<i.length;r++){var a=i[r];switch(a.type){case"body":if(a.parent!==a){s.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}o.addBody(e,a);break;case"constraint":o.addConstraint(e,a);break;case"composite":o.addComposite(e,a);break;case"mouseConstraint":o.addConstraint(e,a.constraint)}}return n.trigger(e,"afterAdd",{object:t}),e},o.remove=function(e,t,i){var s=[].concat(t);n.trigger(e,"beforeRemove",{object:t});for(var r=0;r<s.length;r++){var a=s[r];switch(a.type){case"body":o.removeBody(e,a,i);break;case"constraint":o.removeConstraint(e,a,i);break;case"composite":o.removeComposite(e,a,i);break;case"mouseConstraint":o.removeConstraint(e,a.constraint)}}return n.trigger(e,"afterRemove",{object:t}),e},o.addComposite=function(e,t){return e.composites.push(t),t.parent=e,o.setModified(e,!0,!0,!1),e},o.removeComposite=function(e,t,i){var n=s.indexOf(e.composites,t);if(-1!==n&&(o.removeCompositeAt(e,n),o.setModified(e,!0,!0,!1)),i)for(var r=0;r<e.composites.length;r++)o.removeComposite(e.composites[r],t,!0);return e},o.removeCompositeAt=function(e,t){return e.composites.splice(t,1),o.setModified(e,!0,!0,!1),e},o.addBody=function(e,t){return e.bodies.push(t),o.setModified(e,!0,!0,!1),e},o.removeBody=function(e,t,i){var n=s.indexOf(e.bodies,t);if(-1!==n&&(o.removeBodyAt(e,n),o.setModified(e,!0,!0,!1)),i)for(var r=0;r<e.composites.length;r++)o.removeBody(e.composites[r],t,!0);return e},o.removeBodyAt=function(e,t){return e.bodies.splice(t,1),o.setModified(e,!0,!0,!1),e},o.addConstraint=function(e,t){return e.constraints.push(t),o.setModified(e,!0,!0,!1),e},o.removeConstraint=function(e,t,i){var n=s.indexOf(e.constraints,t);if(-1!==n&&o.removeConstraintAt(e,n),i)for(var r=0;r<e.composites.length;r++)o.removeConstraint(e.composites[r],t,!0);return e},o.removeConstraintAt=function(e,t){return e.constraints.splice(t,1),o.setModified(e,!0,!0,!1),e},o.clear=function(e,t,i){if(i)for(var n=0;n<e.composites.length;n++)o.clear(e.composites[n],t,!0);return t?e.bodies=e.bodies.filter((function(e){return e.isStatic})):e.bodies.length=0,e.constraints.length=0,e.composites.length=0,o.setModified(e,!0,!0,!1),e},o.allBodies=function(e){for(var t=[].concat(e.bodies),i=0;i<e.composites.length;i++)t=t.concat(o.allBodies(e.composites[i]));return t},o.allConstraints=function(e){for(var t=[].concat(e.constraints),i=0;i<e.composites.length;i++)t=t.concat(o.allConstraints(e.composites[i]));return t},o.allComposites=function(e){for(var t=[].concat(e.composites),i=0;i<e.composites.length;i++)t=t.concat(o.allComposites(e.composites[i]));return t},o.get=function(e,t,i){var n,s;switch(i){case"body":n=o.allBodies(e);break;case"constraint":n=o.allConstraints(e);break;case"composite":n=o.allComposites(e).concat(e)}return n?0===(s=n.filter((function(e){return e.id.toString()===t.toString()}))).length?null:s[0]:null},o.move=function(e,t,i){return o.remove(e,t),o.add(i,t),e},o.rebase=function(e){for(var t=o.allBodies(e).concat(o.allConstraints(e)).concat(o.allComposites(e)),i=0;i<t.length;i++)t[i].id=s.nextId();return o.setModified(e,!0,!0,!1),e},o.translate=function(e,t,i){for(var n=i?o.allBodies(e):e.bodies,s=0;s<n.length;s++)a.translate(n[s],t);return o.setModified(e,!0,!0,!1),e},o.rotate=function(e,t,i,n){for(var s=Math.cos(t),r=Math.sin(t),l=n?o.allBodies(e):e.bodies,c=0;c<l.length;c++){var d=l[c],h=d.position.x-i.x,u=d.position.y-i.y;a.setPosition(d,{x:i.x+(h*s-u*r),y:i.y+(h*r+u*s)}),a.rotate(d,t)}return o.setModified(e,!0,!0,!1),e},o.scale=function(e,t,i,n,s){for(var r=s?o.allBodies(e):e.bodies,l=0;l<r.length;l++){var c=r[l],d=c.position.x-n.x,h=c.position.y-n.y;a.setPosition(c,{x:n.x+d*t,y:n.y+h*i}),a.scale(c,t,i)}return o.setModified(e,!0,!0,!1),e},o.bounds=function(e){for(var t=o.allBodies(e),i=[],n=0;n<t.length;n+=1){var s=t[n];i.push(s.bounds.min,s.bounds.max)}return r.create(i)}},{"../core/Common":14,"../core/Events":16,"../geometry/Bounds":26,"./Body":1}],3:[function(e,t,i){var o={};t.exports=o;var n=e("./Composite"),s=(e("../constraint/Constraint"),e("../core/Common"));o.create=function(e){var t=n.create(),i={label:"World",gravity:{x:0,y:1,scale:.001},bounds:{min:{x:-1/0,y:-1/0},max:{x:1/0,y:1/0}}};return s.extend(t,i,e)}},{"../constraint/Constraint":12,"../core/Common":14,"./Composite":2}],4:[function(e,t,i){var o={};t.exports=o,o.create=function(e){return{id:o.id(e),vertex:e,normalImpulse:0,tangentImpulse:0}},o.id=function(e){return e.body.id+"_"+e.index}},{}],5:[function(e,t,i){var o={};t.exports=o;var n=e("./SAT"),s=e("./Pair"),r=e("../geometry/Bounds");o.collisions=function(e,t){for(var i=[],a=t.pairs.table,l=0;l<e.length;l++){var c=e[l][0],d=e[l][1];if((!c.isStatic&&!c.isSleeping||!d.isStatic&&!d.isSleeping)&&o.canCollide(c.collisionFilter,d.collisionFilter)&&r.overlaps(c.bounds,d.bounds))for(var h=c.parts.length>1?1:0;h<c.parts.length;h++)for(var u=c.parts[h],p=d.parts.length>1?1:0;p<d.parts.length;p++){var y=d.parts[p];if(u===c&&y===d||r.overlaps(u.bounds,y.bounds)){var f,m=a[s.id(u,y)];f=m&&m.isActive?m.collision:null;var v=n.collides(u,y,f);v.collided&&i.push(v)}}}return i},o.canCollide=function(e,t){return e.group===t.group&&0!==e.group?e.group>0:0!=(e.mask&t.category)&&0!=(t.mask&e.category)}},{"../geometry/Bounds":26,"./Pair":7,"./SAT":11}],6:[function(e,t,i){var o={};t.exports=o;var n=e("./Pair"),s=e("./Detector"),r=e("../core/Common");o.create=function(e){var t={controller:o,detector:s.collisions,buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return r.extend(t,e)},o.update=function(e,t,i,n){var s,r,a,l,c,d=i.world,h=e.buckets,u=!1;for(s=0;s<t.length;s++){var p=t[s];if((!p.isSleeping||n)&&!(p.bounds.max.x<d.bounds.min.x||p.bounds.min.x>d.bounds.max.x||p.bounds.max.y<d.bounds.min.y||p.bounds.min.y>d.bounds.max.y)){var y=o._getRegion(e,p);if(!p.region||y.id!==p.region.id||n){p.region&&!n||(p.region=y);var f=o._regionUnion(y,p.region);for(r=f.startCol;r<=f.endCol;r++)for(a=f.startRow;a<=f.endRow;a++){l=h[c=o._getBucketId(r,a)];var m=r>=y.startCol&&r<=y.endCol&&a>=y.startRow&&a<=y.endRow,v=r>=p.region.startCol&&r<=p.region.endCol&&a>=p.region.startRow&&a<=p.region.endRow;!m&&v&&v&&l&&o._bucketRemoveBody(e,l,p),(p.region===y||m&&!v||n)&&(l||(l=o._createBucket(h,c)),o._bucketAddBody(e,l,p))}p.region=y,u=!0}}}u&&(e.pairsList=o._createActivePairsList(e))},o.clear=function(e){e.buckets={},e.pairs={},e.pairsList=[]},o._regionUnion=function(e,t){var i=Math.min(e.startCol,t.startCol),n=Math.max(e.endCol,t.endCol),s=Math.min(e.startRow,t.startRow),r=Math.max(e.endRow,t.endRow);return o._createRegion(i,n,s,r)},o._getRegion=function(e,t){var i=t.bounds,n=Math.floor(i.min.x/e.bucketWidth),s=Math.floor(i.max.x/e.bucketWidth),r=Math.floor(i.min.y/e.bucketHeight),a=Math.floor(i.max.y/e.bucketHeight);return o._createRegion(n,s,r,a)},o._createRegion=function(e,t,i,o){return{id:e+","+t+","+i+","+o,startCol:e,endCol:t,startRow:i,endRow:o}},o._getBucketId=function(e,t){return"C"+e+"R"+t},o._createBucket=function(e,t){return e[t]=[]},o._bucketAddBody=function(e,t,i){for(var o=0;o<t.length;o++){var s=t[o];if(!(i.id===s.id||i.isStatic&&s.isStatic)){var r=n.id(i,s),a=e.pairs[r];a?a[2]+=1:e.pairs[r]=[i,s,1]}}t.push(i)},o._bucketRemoveBody=function(e,t,i){t.splice(r.indexOf(t,i),1);for(var o=0;o<t.length;o++){var s=t[o],a=n.id(i,s),l=e.pairs[a];l&&(l[2]-=1)}},o._createActivePairsList=function(e){var t,i,o=[];t=r.keys(e.pairs);for(var n=0;n<t.length;n++)(i=e.pairs[t[n]])[2]>0?o.push(i):delete e.pairs[t[n]];return o}},{"../core/Common":14,"./Detector":5,"./Pair":7}],7:[function(e,t,i){var o={};t.exports=o;var n=e("./Contact");o.create=function(e,t){var i=e.bodyA,n=e.bodyB,s=e.parentA,r=e.parentB,a={id:o.id(i,n),bodyA:i,bodyB:n,contacts:{},activeContacts:[],separation:0,isActive:!0,isSensor:i.isSensor||n.isSensor,timeCreated:t,timeUpdated:t,inverseMass:s.inverseMass+r.inverseMass,friction:Math.min(s.friction,r.friction),frictionStatic:Math.max(s.frictionStatic,r.frictionStatic),restitution:Math.max(s.restitution,r.restitution),slop:Math.max(s.slop,r.slop)};return o.update(a,e,t),a},o.update=function(e,t,i){var s=e.contacts,r=t.supports,a=e.activeContacts,l=t.parentA,c=t.parentB;if(e.collision=t,e.inverseMass=l.inverseMass+c.inverseMass,e.friction=Math.min(l.friction,c.friction),e.frictionStatic=Math.max(l.frictionStatic,c.frictionStatic),e.restitution=Math.max(l.restitution,c.restitution),e.slop=Math.max(l.slop,c.slop),a.length=0,t.collided){for(var d=0;d<r.length;d++){var h=r[d],u=n.id(h),p=s[u];p?a.push(p):a.push(s[u]=n.create(h))}e.separation=t.depth,o.setActive(e,!0,i)}else!0===e.isActive&&o.setActive(e,!1,i)},o.setActive=function(e,t,i){t?(e.isActive=!0,e.timeUpdated=i):(e.isActive=!1,e.activeContacts.length=0)},o.id=function(e,t){return e.id<t.id?"A"+e.id+"B"+t.id:"A"+t.id+"B"+e.id}},{"./Contact":4}],8:[function(e,t,i){var o={};t.exports=o;var n=e("./Pair"),s=e("../core/Common");o._pairMaxIdleLife=1e3,o.create=function(e){return s.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},e)},o.update=function(e,t,i){var o,r,a,l,c=e.list,d=e.table,h=e.collisionStart,u=e.collisionEnd,p=e.collisionActive,y=[];for(h.length=0,u.length=0,p.length=0,l=0;l<t.length;l++)(o=t[l]).collided&&(r=n.id(o.bodyA,o.bodyB),y.push(r),(a=d[r])?(a.isActive?p.push(a):h.push(a),n.update(a,o,i)):(a=n.create(o,i),d[r]=a,h.push(a),c.push(a)));for(l=0;l<c.length;l++)(a=c[l]).isActive&&-1===s.indexOf(y,a.id)&&(n.setActive(a,!1,i),u.push(a))},o.removeOld=function(e,t){var i,n,s,r,a=e.list,l=e.table,c=[];for(r=0;r<a.length;r++)(n=(i=a[r]).collision).bodyA.isSleeping||n.bodyB.isSleeping?i.timeUpdated=t:t-i.timeUpdated>o._pairMaxIdleLife&&c.push(r);for(r=0;r<c.length;r++)delete l[(i=a[s=c[r]-r]).id],a.splice(s,1)},o.clear=function(e){return e.table={},e.list.length=0,e.collisionStart.length=0,e.collisionActive.length=0,e.collisionEnd.length=0,e}},{"../core/Common":14,"./Pair":7}],9:[function(e,t,i){var o={};t.exports=o;var n=e("../geometry/Vector"),s=e("./SAT"),r=e("../geometry/Bounds"),a=e("../factory/Bodies"),l=e("../geometry/Vertices");o.collides=function(e,t){for(var i=[],o=0;o<t.length;o++){var n=t[o];if(r.overlaps(n.bounds,e.bounds))for(var a=1===n.parts.length?0:1;a<n.parts.length;a++){var l=n.parts[a];if(r.overlaps(l.bounds,e.bounds)){var c=s.collides(l,e);if(c.collided){i.push(c);break}}}}return i},o.ray=function(e,t,i,s){s=s||1e-100;for(var r=n.angle(t,i),l=n.magnitude(n.sub(t,i)),c=.5*(i.x+t.x),d=.5*(i.y+t.y),h=a.rectangle(c,d,l,s,{angle:r}),u=o.collides(h,e),p=0;p<u.length;p+=1){var y=u[p];y.body=y.bodyB=y.bodyA}return u},o.region=function(e,t,i){for(var o=[],n=0;n<e.length;n++){var s=e[n],a=r.overlaps(s.bounds,t);(a&&!i||!a&&i)&&o.push(s)}return o},o.point=function(e,t){for(var i=[],o=0;o<e.length;o++){var n=e[o];if(r.contains(n.bounds,t))for(var s=1===n.parts.length?0:1;s<n.parts.length;s++){var a=n.parts[s];if(r.contains(a.bounds,t)&&l.contains(a.vertices,t)){i.push(n);break}}}return i}},{"../factory/Bodies":23,"../geometry/Bounds":26,"../geometry/Vector":28,"../geometry/Vertices":29,"./SAT":11}],10:[function(e,t,i){var o={};t.exports=o;var n=e("../geometry/Vertices"),s=e("../geometry/Vector"),r=e("../core/Common"),a=e("../geometry/Bounds");o._restingThresh=4,o._restingThreshTangent=6,o._positionDampen=.9,o._positionWarming=.8,o._frictionNormalMultiplier=5,o.preSolvePosition=function(e){var t,i,o;for(t=0;t<e.length;t++)(i=e[t]).isActive&&(o=i.activeContacts.length,i.collision.parentA.totalContacts+=o,i.collision.parentB.totalContacts+=o)},o.solvePosition=function(e,t){var i,n,r,a,l,c,d,h,u,p=s._temp[0],y=s._temp[1],f=s._temp[2],m=s._temp[3];for(i=0;i<e.length;i++)(n=e[i]).isActive&&!n.isSensor&&(a=(r=n.collision).parentA,l=r.parentB,c=r.normal,d=s.sub(s.add(l.positionImpulse,l.position,p),s.add(a.positionImpulse,s.sub(l.position,r.penetration,y),f),m),n.separation=s.dot(c,d));for(i=0;i<e.length;i++)(n=e[i]).isActive&&!n.isSensor&&(a=(r=n.collision).parentA,l=r.parentB,c=r.normal,u=(n.separation-n.slop)*t,(a.isStatic||l.isStatic)&&(u*=2),a.isStatic||a.isSleeping||(h=o._positionDampen/a.totalContacts,a.positionImpulse.x+=c.x*u*h,a.positionImpulse.y+=c.y*u*h),l.isStatic||l.isSleeping||(h=o._positionDampen/l.totalContacts,l.positionImpulse.x-=c.x*u*h,l.positionImpulse.y-=c.y*u*h))},o.postSolvePosition=function(e){for(var t=0;t<e.length;t++){var i=e[t];if(i.totalContacts=0,0!==i.positionImpulse.x||0!==i.positionImpulse.y){for(var r=0;r<i.parts.length;r++){var l=i.parts[r];n.translate(l.vertices,i.positionImpulse),a.update(l.bounds,l.vertices,i.velocity),l.position.x+=i.positionImpulse.x,l.position.y+=i.positionImpulse.y}i.positionPrev.x+=i.positionImpulse.x,i.positionPrev.y+=i.positionImpulse.y,s.dot(i.positionImpulse,i.velocity)<0?(i.positionImpulse.x=0,i.positionImpulse.y=0):(i.positionImpulse.x*=o._positionWarming,i.positionImpulse.y*=o._positionWarming)}}},o.preSolveVelocity=function(e){var t,i,o,n,r,a,l,c,d,h,u,p,y,f,m=s._temp[0],v=s._temp[1];for(t=0;t<e.length;t++)if((o=e[t]).isActive&&!o.isSensor)for(n=o.activeContacts,a=(r=o.collision).parentA,l=r.parentB,c=r.normal,d=r.tangent,i=0;i<n.length;i++)u=(h=n[i]).vertex,p=h.normalImpulse,y=h.tangentImpulse,0===p&&0===y||(m.x=c.x*p+d.x*y,m.y=c.y*p+d.y*y,a.isStatic||a.isSleeping||(f=s.sub(u,a.position,v),a.positionPrev.x+=m.x*a.inverseMass,a.positionPrev.y+=m.y*a.inverseMass,a.anglePrev+=s.cross(f,m)*a.inverseInertia),l.isStatic||l.isSleeping||(f=s.sub(u,l.position,v),l.positionPrev.x-=m.x*l.inverseMass,l.positionPrev.y-=m.y*l.inverseMass,l.anglePrev-=s.cross(f,m)*l.inverseInertia))},o.solveVelocity=function(e,t){for(var i=t*t,n=s._temp[0],a=s._temp[1],l=s._temp[2],c=s._temp[3],d=s._temp[4],h=s._temp[5],u=0;u<e.length;u++){var p=e[u];if(p.isActive&&!p.isSensor){var y=p.collision,f=y.parentA,m=y.parentB,v=y.normal,g=y.tangent,x=p.activeContacts,b=1/x.length;f.velocity.x=f.position.x-f.positionPrev.x,f.velocity.y=f.position.y-f.positionPrev.y,m.velocity.x=m.position.x-m.positionPrev.x,m.velocity.y=m.position.y-m.positionPrev.y,f.angularVelocity=f.angle-f.anglePrev,m.angularVelocity=m.angle-m.anglePrev;for(var w=0;w<x.length;w++){var S=x[w],P=S.vertex,C=s.sub(P,f.position,a),A=s.sub(P,m.position,l),T=s.add(f.velocity,s.mult(s.perp(C),f.angularVelocity),c),B=s.add(m.velocity,s.mult(s.perp(A),m.angularVelocity),d),E=s.sub(T,B,h),M=s.dot(v,E),_=s.dot(g,E),I=Math.abs(_),R=r.sign(_),k=(1+p.restitution)*M,O=r.clamp(p.separation+M,0,1)*o._frictionNormalMultiplier,F=_,L=1/0;I>p.friction*p.frictionStatic*O*i&&(L=I,F=r.clamp(p.friction*R*i,-L,L));var V=s.cross(C,v),D=s.cross(A,v),j=b/(f.inverseMass+m.inverseMass+f.inverseInertia*V*V+m.inverseInertia*D*D);if(k*=j,F*=j,M<0&&M*M>o._restingThresh*i)S.normalImpulse=0;else{var W=S.normalImpulse;S.normalImpulse=Math.min(S.normalImpulse+k,0),k=S.normalImpulse-W}if(_*_>o._restingThreshTangent*i)S.tangentImpulse=0;else{var N=S.tangentImpulse;S.tangentImpulse=r.clamp(S.tangentImpulse+F,-L,L),F=S.tangentImpulse-N}n.x=v.x*k+g.x*F,n.y=v.y*k+g.y*F,f.isStatic||f.isSleeping||(f.positionPrev.x+=n.x*f.inverseMass,f.positionPrev.y+=n.y*f.inverseMass,f.anglePrev+=s.cross(C,n)*f.inverseInertia),m.isStatic||m.isSleeping||(m.positionPrev.x-=n.x*m.inverseMass,m.positionPrev.y-=n.y*m.inverseMass,m.anglePrev-=s.cross(A,n)*m.inverseInertia)}}}}},{"../core/Common":14,"../geometry/Bounds":26,"../geometry/Vector":28,"../geometry/Vertices":29}],11:[function(e,t,i){var o={};t.exports=o;var n=e("../geometry/Vertices"),s=e("../geometry/Vector");o.collides=function(e,t,i){var r,a,l,c,d=!1;if(i){var h=e.parent,u=t.parent,p=h.speed*h.speed+h.angularSpeed*h.angularSpeed+u.speed*u.speed+u.angularSpeed*u.angularSpeed;d=i&&i.collided&&p<.2,c=i}else c={collided:!1,bodyA:e,bodyB:t};if(i&&d){var y=c.axisBody,f=y===e?t:e,m=[y.axes[i.axisNumber]];if(l=o._overlapAxes(y.vertices,f.vertices,m),c.reused=!0,l.overlap<=0)return c.collided=!1,c}else{if((r=o._overlapAxes(e.vertices,t.vertices,e.axes)).overlap<=0)return c.collided=!1,c;if((a=o._overlapAxes(t.vertices,e.vertices,t.axes)).overlap<=0)return c.collided=!1,c;r.overlap<a.overlap?(l=r,c.axisBody=e):(l=a,c.axisBody=t),c.axisNumber=l.axisNumber}c.bodyA=e.id<t.id?e:t,c.bodyB=e.id<t.id?t:e,c.collided=!0,c.depth=l.overlap,c.parentA=c.bodyA.parent,c.parentB=c.bodyB.parent,e=c.bodyA,t=c.bodyB,s.dot(l.axis,s.sub(t.position,e.position))<0?c.normal={x:l.axis.x,y:l.axis.y}:c.normal={x:-l.axis.x,y:-l.axis.y},c.tangent=s.perp(c.normal),c.penetration=c.penetration||{},c.penetration.x=c.normal.x*c.depth,c.penetration.y=c.normal.y*c.depth;var v=o._findSupports(e,t,c.normal),g=[];if(n.contains(e.vertices,v[0])&&g.push(v[0]),n.contains(e.vertices,v[1])&&g.push(v[1]),g.length<2){var x=o._findSupports(t,e,s.neg(c.normal));n.contains(t.vertices,x[0])&&g.push(x[0]),g.length<2&&n.contains(t.vertices,x[1])&&g.push(x[1])}return g.length<1&&(g=[v[0]]),c.supports=g,c},o._overlapAxes=function(e,t,i){for(var n,r,a=s._temp[0],l=s._temp[1],c={overlap:Number.MAX_VALUE},d=0;d<i.length;d++){if(r=i[d],o._projectToAxis(a,e,r),o._projectToAxis(l,t,r),(n=Math.min(a.max-l.min,l.max-a.min))<=0)return c.overlap=n,c;n<c.overlap&&(c.overlap=n,c.axis=r,c.axisNumber=d)}return c},o._projectToAxis=function(e,t,i){for(var o=s.dot(t[0],i),n=o,r=1;r<t.length;r+=1){var a=s.dot(t[r],i);a>n?n=a:a<o&&(o=a)}e.min=o,e.max=n},o._findSupports=function(e,t,i){for(var o,n,r,a,l=Number.MAX_VALUE,c=s._temp[0],d=t.vertices,h=e.position,u=0;u<d.length;u++)n=d[u],c.x=n.x-h.x,c.y=n.y-h.y,(o=-s.dot(i,c))<l&&(l=o,r=n);return n=d[r.index-1>=0?r.index-1:d.length-1],c.x=n.x-h.x,c.y=n.y-h.y,l=-s.dot(i,c),a=n,n=d[(r.index+1)%d.length],c.x=n.x-h.x,c.y=n.y-h.y,(o=-s.dot(i,c))<l&&(a=n),[r,a]}},{"../geometry/Vector":28,"../geometry/Vertices":29}],12:[function(e,t,i){var o={};t.exports=o;var n=e("../geometry/Vertices"),s=e("../geometry/Vector"),r=e("../core/Sleeping"),a=e("../geometry/Bounds"),l=e("../geometry/Axes"),c=e("../core/Common");o._warming=.4,o._torqueDampen=1,o._minLength=1e-6,o.create=function(e){var t=e;t.bodyA&&!t.pointA&&(t.pointA={x:0,y:0}),t.bodyB&&!t.pointB&&(t.pointB={x:0,y:0});var i=t.bodyA?s.add(t.bodyA.position,t.pointA):t.pointA,o=t.bodyB?s.add(t.bodyB.position,t.pointB):t.pointB,n=s.magnitude(s.sub(i,o));t.length=void 0!==t.length?t.length:n,t.id=t.id||c.nextId(),t.label=t.label||"Constraint",t.type="constraint",t.stiffness=t.stiffness||(t.length>0?1:.7),t.damping=t.damping||0,t.angularStiffness=t.angularStiffness||0,t.angleA=t.bodyA?t.bodyA.angle:t.angleA,t.angleB=t.bodyB?t.bodyB.angle:t.angleB,t.plugin={};var r={visible:!0,lineWidth:2,strokeStyle:"#ffffff",type:"line",anchors:!0};return 0===t.length&&t.stiffness>.1?(r.type="pin",r.anchors=!1):t.stiffness<.9&&(r.type="spring"),t.render=c.extend(r,t.render),t},o.preSolveAll=function(e){for(var t=0;t<e.length;t+=1){var i=e[t],o=i.constraintImpulse;i.isStatic||0===o.x&&0===o.y&&0===o.angle||(i.position.x+=o.x,i.position.y+=o.y,i.angle+=o.angle)}},o.solveAll=function(e,t){for(var i=0;i<e.length;i+=1){var n=e[i],s=!n.bodyA||n.bodyA&&n.bodyA.isStatic,r=!n.bodyB||n.bodyB&&n.bodyB.isStatic;(s||r)&&o.solve(e[i],t)}for(i=0;i<e.length;i+=1)s=!(n=e[i]).bodyA||n.bodyA&&n.bodyA.isStatic,r=!n.bodyB||n.bodyB&&n.bodyB.isStatic,s||r||o.solve(e[i],t)},o.solve=function(e,t){var i=e.bodyA,n=e.bodyB,r=e.pointA,a=e.pointB;if(i||n){i&&!i.isStatic&&(s.rotate(r,i.angle-e.angleA,r),e.angleA=i.angle),n&&!n.isStatic&&(s.rotate(a,n.angle-e.angleB,a),e.angleB=n.angle);var l=r,c=a;if(i&&(l=s.add(i.position,r)),n&&(c=s.add(n.position,a)),l&&c){var d=s.sub(l,c),h=s.magnitude(d);h<o._minLength&&(h=o._minLength);var u,p,y,f,m,v=(h-e.length)/h,g=e.stiffness<1?e.stiffness*t:e.stiffness,x=s.mult(d,v*g),b=(i?i.inverseMass:0)+(n?n.inverseMass:0),w=b+((i?i.inverseInertia:0)+(n?n.inverseInertia:0));if(e.damping){var S=s.create();y=s.div(d,h),m=s.sub(n&&s.sub(n.position,n.positionPrev)||S,i&&s.sub(i.position,i.positionPrev)||S),f=s.dot(y,m)}i&&!i.isStatic&&(p=i.inverseMass/b,i.constraintImpulse.x-=x.x*p,i.constraintImpulse.y-=x.y*p,i.position.x-=x.x*p,i.position.y-=x.y*p,e.damping&&(i.positionPrev.x-=e.damping*y.x*f*p,i.positionPrev.y-=e.damping*y.y*f*p),u=s.cross(r,x)/w*o._torqueDampen*i.inverseInertia*(1-e.angularStiffness),i.constraintImpulse.angle-=u,i.angle-=u),n&&!n.isStatic&&(p=n.inverseMass/b,n.constraintImpulse.x+=x.x*p,n.constraintImpulse.y+=x.y*p,n.position.x+=x.x*p,n.position.y+=x.y*p,e.damping&&(n.positionPrev.x+=e.damping*y.x*f*p,n.positionPrev.y+=e.damping*y.y*f*p),u=s.cross(a,x)/w*o._torqueDampen*n.inverseInertia*(1-e.angularStiffness),n.constraintImpulse.angle+=u,n.angle+=u)}}},o.postSolveAll=function(e){for(var t=0;t<e.length;t++){var i=e[t],c=i.constraintImpulse;if(!(i.isStatic||0===c.x&&0===c.y&&0===c.angle)){r.set(i,!1);for(var d=0;d<i.parts.length;d++){var h=i.parts[d];n.translate(h.vertices,c),d>0&&(h.position.x+=c.x,h.position.y+=c.y),0!==c.angle&&(n.rotate(h.vertices,c.angle,i.position),l.rotate(h.axes,c.angle),d>0&&s.rotateAbout(h.position,c.angle,i.position,h.position)),a.update(h.bounds,h.vertices,i.velocity)}c.angle*=o._warming,c.x*=o._warming,c.y*=o._warming}}}},{"../core/Common":14,"../core/Sleeping":22,"../geometry/Axes":25,"../geometry/Bounds":26,"../geometry/Vector":28,"../geometry/Vertices":29}],13:[function(e,t,i){var o={};t.exports=o;var n=e("../geometry/Vertices"),s=e("../core/Sleeping"),r=e("../core/Mouse"),a=e("../core/Events"),l=e("../collision/Detector"),c=e("./Constraint"),d=e("../body/Composite"),h=e("../core/Common"),u=e("../geometry/Bounds");o.create=function(e,t){var i=(e?e.mouse:null)||(t?t.mouse:null);i||(e&&e.render&&e.render.canvas?i=r.create(e.render.canvas):t&&t.element?i=r.create(t.element):(i=r.create(),h.warn("MouseConstraint.create: options.mouse was undefined, options.element was undefined, may not function as expected")));var n={type:"mouseConstraint",mouse:i,element:null,body:null,constraint:c.create({label:"Mouse Constraint",pointA:i.position,pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,render:{strokeStyle:"#90EE90",lineWidth:3}}),collisionFilter:{category:1,mask:4294967295,group:0}},s=h.extend(n,t);return a.on(e,"beforeUpdate",(function(){var t=d.allBodies(e.world);o.update(s,t),o._triggerEvents(s)})),s},o.update=function(e,t){var i=e.mouse,o=e.constraint,r=e.body;if(0===i.button){if(o.bodyB)s.set(o.bodyB,!1),o.pointA=i.position;else for(var c=0;c<t.length;c++)if(r=t[c],u.contains(r.bounds,i.position)&&l.canCollide(r.collisionFilter,e.collisionFilter))for(var d=r.parts.length>1?1:0;d<r.parts.length;d++){var h=r.parts[d];if(n.contains(h.vertices,i.position)){o.pointA=i.position,o.bodyB=e.body=r,o.pointB={x:i.position.x-r.position.x,y:i.position.y-r.position.y},o.angleB=r.angle,s.set(r,!1),a.trigger(e,"startdrag",{mouse:i,body:r});break}}}else o.bodyB=e.body=null,o.pointB=null,r&&a.trigger(e,"enddrag",{mouse:i,body:r})},o._triggerEvents=function(e){var t=e.mouse,i=t.sourceEvents;i.mousemove&&a.trigger(e,"mousemove",{mouse:t}),i.mousedown&&a.trigger(e,"mousedown",{mouse:t}),i.mouseup&&a.trigger(e,"mouseup",{mouse:t}),r.clearSourceEvents(t)}},{"../body/Composite":2,"../collision/Detector":5,"../core/Common":14,"../core/Events":16,"../core/Mouse":19,"../core/Sleeping":22,"../geometry/Bounds":26,"../geometry/Vertices":29,"./Constraint":12}],14:[function(e,i,o){(function(t){var o={};i.exports=o,function(){o._nextId=0,o._seed=0,o._nowStartTime=+new Date,o.extend=function(e,t){var i,n;"boolean"==typeof t?(i=2,n=t):(i=1,n=!0);for(var s=i;s<arguments.length;s++){var r=arguments[s];if(r)for(var a in r)n&&r[a]&&r[a].constructor===Object?e[a]&&e[a].constructor!==Object?e[a]=r[a]:(e[a]=e[a]||{},o.extend(e[a],n,r[a])):e[a]=r[a]}return e},o.clone=function(e,t){return o.extend({},t,e)},o.keys=function(e){if(Object.keys)return Object.keys(e);var t=[];for(var i in e)t.push(i);return t},o.values=function(e){var t=[];if(Object.keys){for(var i=Object.keys(e),o=0;o<i.length;o++)t.push(e[i[o]]);return t}for(var n in e)t.push(e[n]);return t},o.get=function(e,t,i,o){t=t.split(".").slice(i,o);for(var n=0;n<t.length;n+=1)e=e[t[n]];return e},o.set=function(e,t,i,n,s){var r=t.split(".").slice(n,s);return o.get(e,t,0,-1)[r[r.length-1]]=i,i},o.shuffle=function(e){for(var t=e.length-1;t>0;t--){var i=Math.floor(o.random()*(t+1)),n=e[t];e[t]=e[i],e[i]=n}return e},o.choose=function(e){return e[Math.floor(o.random()*e.length)]},o.isElement=function(e){return"undefined"!=typeof HTMLElement?e instanceof HTMLElement:!!(e&&e.nodeType&&e.nodeName)},o.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},o.isFunction=function(e){return"function"==typeof e},o.isPlainObject=function(e){return"object"==typeof e&&e.constructor===Object},o.isString=function(e){return"[object String]"===toString.call(e)},o.clamp=function(e,t,i){return e<t?t:e>i?i:e},o.sign=function(e){return e<0?-1:1},o.now=function(){if(window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return new Date-o._nowStartTime},o.random=function(e,t){return t=void 0!==t?t:1,(e=void 0!==e?e:0)+i()*(t-e)};var i=function(){return o._seed=(9301*o._seed+49297)%233280,o._seed/233280};o.colorToNumber=function(e){return 3==(e=e.replace("#","")).length&&(e=e.charAt(0)+e.charAt(0)+e.charAt(1)+e.charAt(1)+e.charAt(2)+e.charAt(2)),parseInt(e,16)},o.logLevel=1,o.log=function(){console&&o.logLevel>0&&o.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},o.info=function(){console&&o.logLevel>0&&o.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},o.warn=function(){console&&o.logLevel>0&&o.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},o.nextId=function(){return o._nextId++},o.indexOf=function(e,t){if(e.indexOf)return e.indexOf(t);for(var i=0;i<e.length;i++)if(e[i]===t)return i;return-1},o.map=function(e,t){if(e.map)return e.map(t);for(var i=[],o=0;o<e.length;o+=1)i.push(t(e[o]));return i},o.topologicalSort=function(e){var t=[],i=[],n=[];for(var s in e)i[s]||n[s]||o._topologicalSort(s,i,n,e,t);return t},o._topologicalSort=function(e,t,i,n,s){var r=n[e]||[];i[e]=!0;for(var a=0;a<r.length;a+=1){var l=r[a];i[l]||t[l]||o._topologicalSort(l,t,i,n,s)}i[e]=!1,t[e]=!0,s.push(e)},o.chain=function(){for(var e=[],t=0;t<arguments.length;t+=1){var i=arguments[t];i._chained?e.push.apply(e,i._chained):e.push(i)}var o=function(){for(var t,i=new Array(arguments.length),o=0,n=arguments.length;o<n;o++)i[o]=arguments[o];for(o=0;o<e.length;o+=1){var s=e[o].apply(t,i);void 0!==s&&(t=s)}return t};return o._chained=e,o},o.chainPathBefore=function(e,t,i){return o.set(e,t,o.chain(i,o.get(e,t)))},o.chainPathAfter=function(e,t,i){return o.set(e,t,o.chain(o.get(e,t),i))},o._requireGlobal=function(i,o){return("undefined"!=typeof window?window[i]:void 0!==t?t[i]:null)||e(o)}}()}).call(this,void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],15:[function(e,t,i){var o={};t.exports=o;var n=e("../body/World"),s=e("./Sleeping"),r=e("../collision/Resolver"),a=e("../render/Render"),l=e("../collision/Pairs"),c=(e("./Metrics"),e("../collision/Grid")),d=e("./Events"),h=e("../body/Composite"),u=e("../constraint/Constraint"),p=e("./Common"),y=e("../body/Body");o.create=function(e,t){t=(t=p.isElement(e)?t:e)||{},((e=p.isElement(e)?e:null)||t.render)&&p.warn("Engine.create: engine.render is deprecated (see docs)");var i={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},timing:{timestamp:0,timeScale:1},broadphase:{controller:c}},o=p.extend(i,t);if(e||o.render){var s={element:e,controller:a};o.render=p.extend(s,o.render)}return o.render&&o.render.controller&&(o.render=o.render.controller.create(o.render)),o.render&&(o.render.engine=o),o.world=t.world||n.create(o.world),o.pairs=l.create(),o.broadphase=o.broadphase.controller.create(o.broadphase),o.metrics=o.metrics||{extended:!1},o},o.update=function(e,t,i){t=t||1e3/60,i=i||1;var n,a=e.world,c=e.timing,p=e.broadphase,y=[];c.timestamp+=t*c.timeScale;var f={timestamp:c.timestamp};d.trigger(e,"beforeUpdate",f);var m=h.allBodies(a),v=h.allConstraints(a);for(e.enableSleeping&&s.update(m,c.timeScale),o._bodiesApplyGravity(m,a.gravity),o._bodiesUpdate(m,t,c.timeScale,i,a.bounds),u.preSolveAll(m),n=0;n<e.constraintIterations;n++)u.solveAll(v,c.timeScale);u.postSolveAll(m),p.controller?(a.isModified&&p.controller.clear(p),p.controller.update(p,m,e,a.isModified),y=p.pairsList):y=m,a.isModified&&h.setModified(a,!1,!1,!0);var g=p.detector(y,e),x=e.pairs,b=c.timestamp;for(l.update(x,g,b),l.removeOld(x,b),e.enableSleeping&&s.afterCollisions(x.list,c.timeScale),x.collisionStart.length>0&&d.trigger(e,"collisionStart",{pairs:x.collisionStart}),r.preSolvePosition(x.list),n=0;n<e.positionIterations;n++)r.solvePosition(x.list,c.timeScale);for(r.postSolvePosition(m),u.preSolveAll(m),n=0;n<e.constraintIterations;n++)u.solveAll(v,c.timeScale);for(u.postSolveAll(m),r.preSolveVelocity(x.list),n=0;n<e.velocityIterations;n++)r.solveVelocity(x.list,c.timeScale);return x.collisionActive.length>0&&d.trigger(e,"collisionActive",{pairs:x.collisionActive}),x.collisionEnd.length>0&&d.trigger(e,"collisionEnd",{pairs:x.collisionEnd}),o._bodiesClearForces(m),d.trigger(e,"afterUpdate",f),e},o.merge=function(e,t){if(p.extend(e,t),t.world){e.world=t.world,o.clear(e);for(var i=h.allBodies(e.world),n=0;n<i.length;n++){var r=i[n];s.set(r,!1),r.id=p.nextId()}}},o.clear=function(e){var t=e.world;l.clear(e.pairs);var i=e.broadphase;if(i.controller){var o=h.allBodies(t);i.controller.clear(i),i.controller.update(i,o,e,!0)}},o._bodiesClearForces=function(e){for(var t=0;t<e.length;t++){var i=e[t];i.force.x=0,i.force.y=0,i.torque=0}},o._bodiesApplyGravity=function(e,t){var i=void 0!==t.scale?t.scale:.001;if((0!==t.x||0!==t.y)&&0!==i)for(var o=0;o<e.length;o++){var n=e[o];n.isStatic||n.isSleeping||(n.force.y+=n.mass*t.y*i,n.force.x+=n.mass*t.x*i)}},o._bodiesUpdate=function(e,t,i,o,n){for(var s=0;s<e.length;s++){var r=e[s];r.isStatic||r.isSleeping||y.update(r,t,i,o)}}},{"../body/Body":1,"../body/Composite":2,"../body/World":3,"../collision/Grid":6,"../collision/Pairs":8,"../collision/Resolver":10,"../constraint/Constraint":12,"../render/Render":31,"./Common":14,"./Events":16,"./Metrics":18,"./Sleeping":22}],16:[function(e,t,i){var o={};t.exports=o;var n=e("./Common");o.on=function(e,t,i){for(var o,n=t.split(" "),s=0;s<n.length;s++)o=n[s],e.events=e.events||{},e.events[o]=e.events[o]||[],e.events[o].push(i);return i},o.off=function(e,t,i){if(t){"function"==typeof t&&(i=t,t=n.keys(e.events).join(" "));for(var o=t.split(" "),s=0;s<o.length;s++){var r=e.events[o[s]],a=[];if(i&&r)for(var l=0;l<r.length;l++)r[l]!==i&&a.push(r[l]);e.events[o[s]]=a}}else e.events={}},o.trigger=function(e,t,i){var o,s,r,a;if(e.events){i||(i={}),o=t.split(" ");for(var l=0;l<o.length;l++)if(s=o[l],r=e.events[s]){(a=n.clone(i,!1)).name=s,a.source=e;for(var c=0;c<r.length;c++)r[c].apply(e,[a])}}}},{"./Common":14}],17:[function(e,t,i){var o={};t.exports=o;var n=e("./Plugin"),s=e("./Common");o.name="matter-js",o.version="0.14.2",o.uses=[],o.used=[],o.use=function(){n.use(o,Array.prototype.slice.call(arguments))},o.before=function(e,t){return e=e.replace(/^Matter./,""),s.chainPathBefore(o,e,t)},o.after=function(e,t){return e=e.replace(/^Matter./,""),s.chainPathAfter(o,e,t)}},{"./Common":14,"./Plugin":20}],18:[function(e,t,i){},{"../body/Composite":2,"./Common":14}],19:[function(e,t,i){var o={};t.exports=o;var n=e("../core/Common");o.create=function(e){var t={};return e||n.log("Mouse.create: element was undefined, defaulting to document.body","warn"),t.element=e||document.body,t.absolute={x:0,y:0},t.position={x:0,y:0},t.mousedownPosition={x:0,y:0},t.mouseupPosition={x:0,y:0},t.offset={x:0,y:0},t.scale={x:1,y:1},t.wheelDelta=0,t.button=-1,t.pixelRatio=t.element.getAttribute("data-pixel-ratio")||1,t.sourceEvents={mousemove:null,mousedown:null,mouseup:null,mousewheel:null},t.mousemove=function(e){var i=o._getRelativeMousePosition(e,t.element,t.pixelRatio);e.changedTouches&&(t.button=0,e.preventDefault()),t.absolute.x=i.x,t.absolute.y=i.y,t.position.x=t.absolute.x*t.scale.x+t.offset.x,t.position.y=t.absolute.y*t.scale.y+t.offset.y,t.sourceEvents.mousemove=e},t.mousedown=function(e){var i=o._getRelativeMousePosition(e,t.element,t.pixelRatio);e.changedTouches?(t.button=0,e.preventDefault()):t.button=e.button,t.absolute.x=i.x,t.absolute.y=i.y,t.position.x=t.absolute.x*t.scale.x+t.offset.x,t.position.y=t.absolute.y*t.scale.y+t.offset.y,t.mousedownPosition.x=t.position.x,t.mousedownPosition.y=t.position.y,t.sourceEvents.mousedown=e},t.mouseup=function(e){var i=o._getRelativeMousePosition(e,t.element,t.pixelRatio);e.changedTouches&&e.preventDefault(),t.button=-1,t.absolute.x=i.x,t.absolute.y=i.y,t.position.x=t.absolute.x*t.scale.x+t.offset.x,t.position.y=t.absolute.y*t.scale.y+t.offset.y,t.mouseupPosition.x=t.position.x,t.mouseupPosition.y=t.position.y,t.sourceEvents.mouseup=e},t.mousewheel=function(e){t.wheelDelta=Math.max(-1,Math.min(1,e.wheelDelta||-e.detail)),e.preventDefault()},o.setElement(t,t.element),t},o.setElement=function(e,t){e.element=t,t.addEventListener("mousemove",e.mousemove),t.addEventListener("mousedown",e.mousedown),t.addEventListener("mouseup",e.mouseup),t.addEventListener("mousewheel",e.mousewheel),t.addEventListener("DOMMouseScroll",e.mousewheel),t.addEventListener("touchmove",e.mousemove),t.addEventListener("touchstart",e.mousedown),t.addEventListener("touchend",e.mouseup)},o.clearSourceEvents=function(e){e.sourceEvents.mousemove=null,e.sourceEvents.mousedown=null,e.sourceEvents.mouseup=null,e.sourceEvents.mousewheel=null,e.wheelDelta=0},o.setOffset=function(e,t){e.offset.x=t.x,e.offset.y=t.y,e.position.x=e.absolute.x*e.scale.x+e.offset.x,e.position.y=e.absolute.y*e.scale.y+e.offset.y},o.setScale=function(e,t){e.scale.x=t.x,e.scale.y=t.y,e.position.x=e.absolute.x*e.scale.x+e.offset.x,e.position.y=e.absolute.y*e.scale.y+e.offset.y},o._getRelativeMousePosition=function(e,t,i){var o,n,s=t.getBoundingClientRect(),r=document.documentElement||document.body.parentNode||document.body,a=void 0!==window.pageXOffset?window.pageXOffset:r.scrollLeft,l=void 0!==window.pageYOffset?window.pageYOffset:r.scrollTop,c=e.changedTouches;return c?(o=c[0].pageX-s.left-a,n=c[0].pageY-s.top-l):(o=e.pageX-s.left-a,n=e.pageY-s.top-l),{x:o/(t.clientWidth/(t.width||t.clientWidth)*i),y:n/(t.clientHeight/(t.height||t.clientHeight)*i)}}},{"../core/Common":14}],20:[function(e,t,i){var o={};t.exports=o;var n=e("./Common");o._registry={},o.register=function(e){if(o.isPlugin(e)||n.warn("Plugin.register:",o.toString(e),"does not implement all required fields."),e.name in o._registry){var t=o._registry[e.name],i=o.versionParse(e.version).number,s=o.versionParse(t.version).number;i>s?(n.warn("Plugin.register:",o.toString(t),"was upgraded to",o.toString(e)),o._registry[e.name]=e):i<s?n.warn("Plugin.register:",o.toString(t),"can not be downgraded to",o.toString(e)):e!==t&&n.warn("Plugin.register:",o.toString(e),"is already registered to different plugin object")}else o._registry[e.name]=e;return e},o.resolve=function(e){return o._registry[o.dependencyParse(e).name]},o.toString=function(e){return"string"==typeof e?e:(e.name||"anonymous")+"@"+(e.version||e.range||"0.0.0")},o.isPlugin=function(e){return e&&e.name&&e.version&&e.install},o.isUsed=function(e,t){return e.used.indexOf(t)>-1},o.isFor=function(e,t){var i=e.for&&o.dependencyParse(e.for);return!e.for||t.name===i.name&&o.versionSatisfies(t.version,i.range)},o.use=function(e,t){if(e.uses=(e.uses||[]).concat(t||[]),0!==e.uses.length){for(var i=o.dependencies(e),s=n.topologicalSort(i),r=[],a=0;a<s.length;a+=1)if(s[a]!==e.name){var l=o.resolve(s[a]);l?o.isUsed(e,l.name)||(o.isFor(l,e)||(n.warn("Plugin.use:",o.toString(l),"is for",l.for,"but installed on",o.toString(e)+"."),l._warned=!0),l.install?l.install(e):(n.warn("Plugin.use:",o.toString(l),"does not specify an install function."),l._warned=!0),l._warned?(r.push("🔶 "+o.toString(l)),delete l._warned):r.push("✅ "+o.toString(l)),e.used.push(l.name)):r.push("❌ "+s[a])}r.length>0&&n.info(r.join("  "))}else n.warn("Plugin.use:",o.toString(e),"does not specify any dependencies to install.")},o.dependencies=function(e,t){var i=o.dependencyParse(e),s=i.name;if(!(s in(t=t||{}))){e=o.resolve(e)||e,t[s]=n.map(e.uses||[],(function(t){o.isPlugin(t)&&o.register(t);var s=o.dependencyParse(t),r=o.resolve(t);return r&&!o.versionSatisfies(r.version,s.range)?(n.warn("Plugin.dependencies:",o.toString(r),"does not satisfy",o.toString(s),"used by",o.toString(i)+"."),r._warned=!0,e._warned=!0):r||(n.warn("Plugin.dependencies:",o.toString(t),"used by",o.toString(i),"could not be resolved."),e._warned=!0),s.name}));for(var r=0;r<t[s].length;r+=1)o.dependencies(t[s][r],t);return t}},o.dependencyParse=function(e){return n.isString(e)?(/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?))?$/.test(e)||n.warn("Plugin.dependencyParse:",e,"is not a valid dependency string."),{name:e.split("@")[0],range:e.split("@")[1]||"*"}):{name:e.name,range:e.range||e.version}},o.versionParse=function(e){/^\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?$/.test(e)||n.warn("Plugin.versionParse:",e,"is not a valid version or range.");var t=e.split("-");e=t[0];var i=isNaN(Number(e[0])),o=i?e.substr(1):e,s=n.map(o.split("."),(function(e){return Number(e)}));return{isRange:i,version:o,range:e,operator:i?e[0]:"",parts:s,prerelease:t[1],number:1e8*s[0]+1e4*s[1]+s[2]}},o.versionSatisfies=function(e,t){t=t||"*";var i=o.versionParse(t),n=i.parts,s=o.versionParse(e),r=s.parts;if(i.isRange){if("*"===i.operator||"*"===e)return!0;if("~"===i.operator)return r[0]===n[0]&&r[1]===n[1]&&r[2]>=n[2];if("^"===i.operator)return n[0]>0?r[0]===n[0]&&s.number>=i.number:n[1]>0?r[1]===n[1]&&r[2]>=n[2]:r[2]===n[2]}return e===t||"*"===e}},{"./Common":14}],21:[function(e,t,i){var o={};t.exports=o;var n,s,r,a=e("./Events"),l=e("./Engine"),c=e("./Common");"undefined"!=typeof window&&(n=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame,s=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),n||(n=function(e){r=setTimeout((function(){e(c.now())}),1e3/60)},s=function(){clearTimeout(r)}),o.create=function(e){var t=c.extend({fps:60,correction:1,deltaSampleSize:60,counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,timeScalePrev:1,frameRequestId:null,isFixed:!1,enabled:!0},e);return t.delta=t.delta||1e3/t.fps,t.deltaMin=t.deltaMin||1e3/t.fps,t.deltaMax=t.deltaMax||1e3/(.5*t.fps),t.fps=1e3/t.delta,t},o.run=function(e,t){return void 0!==e.positionIterations&&(t=e,e=o.create()),function i(s){e.frameRequestId=n(i),s&&e.enabled&&o.tick(e,t,s)}(),e},o.tick=function(e,t,i){var o,n=t.timing,s=1,r={timestamp:n.timestamp};a.trigger(e,"beforeTick",r),a.trigger(t,"beforeTick",r),e.isFixed?o=e.delta:(o=i-e.timePrev||e.delta,e.timePrev=i,e.deltaHistory.push(o),e.deltaHistory=e.deltaHistory.slice(-e.deltaSampleSize),s=(o=(o=(o=Math.min.apply(null,e.deltaHistory))<e.deltaMin?e.deltaMin:o)>e.deltaMax?e.deltaMax:o)/e.delta,e.delta=o),0!==e.timeScalePrev&&(s*=n.timeScale/e.timeScalePrev),0===n.timeScale&&(s=0),e.timeScalePrev=n.timeScale,e.correction=s,e.frameCounter+=1,i-e.counterTimestamp>=1e3&&(e.fps=e.frameCounter*((i-e.counterTimestamp)/1e3),e.counterTimestamp=i,e.frameCounter=0),a.trigger(e,"tick",r),a.trigger(t,"tick",r),t.world.isModified&&t.render&&t.render.controller&&t.render.controller.clear&&t.render.controller.clear(t.render),a.trigger(e,"beforeUpdate",r),l.update(t,o,s),a.trigger(e,"afterUpdate",r),t.render&&t.render.controller&&(a.trigger(e,"beforeRender",r),a.trigger(t,"beforeRender",r),t.render.controller.world(t.render),a.trigger(e,"afterRender",r),a.trigger(t,"afterRender",r)),a.trigger(e,"afterTick",r),a.trigger(t,"afterTick",r)},o.stop=function(e){s(e.frameRequestId)},o.start=function(e,t){o.run(e,t)}},{"./Common":14,"./Engine":15,"./Events":16}],22:[function(e,t,i){var o={};t.exports=o;var n=e("./Events");o._motionWakeThreshold=.18,o._motionSleepThreshold=.08,o._minBias=.9,o.update=function(e,t){for(var i=t*t*t,n=0;n<e.length;n++){var s=e[n],r=s.speed*s.speed+s.angularSpeed*s.angularSpeed;if(0===s.force.x&&0===s.force.y){var a=Math.min(s.motion,r),l=Math.max(s.motion,r);s.motion=o._minBias*a+(1-o._minBias)*l,s.sleepThreshold>0&&s.motion<o._motionSleepThreshold*i?(s.sleepCounter+=1,s.sleepCounter>=s.sleepThreshold&&o.set(s,!0)):s.sleepCounter>0&&(s.sleepCounter-=1)}else o.set(s,!1)}},o.afterCollisions=function(e,t){for(var i=t*t*t,n=0;n<e.length;n++){var s=e[n];if(s.isActive){var r=s.collision,a=r.bodyA.parent,l=r.bodyB.parent;if(!(a.isSleeping&&l.isSleeping||a.isStatic||l.isStatic)&&(a.isSleeping||l.isSleeping)){var c=a.isSleeping&&!a.isStatic?a:l,d=c===a?l:a;!c.isStatic&&d.motion>o._motionWakeThreshold*i&&o.set(c,!1)}}}},o.set=function(e,t){var i=e.isSleeping;t?(e.isSleeping=!0,e.sleepCounter=e.sleepThreshold,e.positionImpulse.x=0,e.positionImpulse.y=0,e.positionPrev.x=e.position.x,e.positionPrev.y=e.position.y,e.anglePrev=e.angle,e.speed=0,e.angularSpeed=0,e.motion=0,i||n.trigger(e,"sleepStart")):(e.isSleeping=!1,e.sleepCounter=0,i&&n.trigger(e,"sleepEnd"))}},{"./Events":16}],23:[function(e,t,i){var o={};t.exports=o;var n,s=e("../geometry/Vertices"),r=e("../core/Common"),a=e("../body/Body"),l=e("../geometry/Bounds"),c=e("../geometry/Vector");o.rectangle=function(e,t,i,o,n){n=n||{};var l={label:"Rectangle Body",position:{x:e,y:t},vertices:s.fromPath("L 0 0 L "+i+" 0 L "+i+" "+o+" L 0 "+o)};if(n.chamfer){var c=n.chamfer;l.vertices=s.chamfer(l.vertices,c.radius,c.quality,c.qualityMin,c.qualityMax),delete n.chamfer}return a.create(r.extend({},l,n))},o.trapezoid=function(e,t,i,o,n,l){l=l||{};var c,d=i*(n*=.5),h=d+(1-2*n)*i,u=h+d;c=n<.5?"L 0 0 L "+d+" "+-o+" L "+h+" "+-o+" L "+u+" 0":"L 0 0 L "+h+" "+-o+" L "+u+" 0";var p={label:"Trapezoid Body",position:{x:e,y:t},vertices:s.fromPath(c)};if(l.chamfer){var y=l.chamfer;p.vertices=s.chamfer(p.vertices,y.radius,y.quality,y.qualityMin,y.qualityMax),delete l.chamfer}return a.create(r.extend({},p,l))},o.circle=function(e,t,i,n,s){n=n||{};var a={label:"Circle Body",circleRadius:i};s=s||25;var l=Math.ceil(Math.max(10,Math.min(s,i)));return l%2==1&&(l+=1),o.polygon(e,t,l,i,r.extend({},a,n))},o.polygon=function(e,t,i,n,l){if(l=l||{},i<3)return o.circle(e,t,n,l);for(var c=2*Math.PI/i,d="",h=.5*c,u=0;u<i;u+=1){var p=h+u*c,y=Math.cos(p)*n,f=Math.sin(p)*n;d+="L "+y.toFixed(3)+" "+f.toFixed(3)+" "}var m={label:"Polygon Body",position:{x:e,y:t},vertices:s.fromPath(d)};if(l.chamfer){var v=l.chamfer;m.vertices=s.chamfer(m.vertices,v.radius,v.quality,v.qualityMin,v.qualityMax),delete l.chamfer}return a.create(r.extend({},m,l))},o.fromVertices=function(e,t,i,o,d,h,u){var p,y,f,m,v,g,x,b,w;for(n||(n=r._requireGlobal("decomp","poly-decomp")),o=o||{},y=[],d=void 0!==d&&d,h=void 0!==h?h:.01,u=void 0!==u?u:10,n||r.warn("Bodies.fromVertices: poly-decomp.js required. Could not decompose vertices. Fallback to convex hull."),r.isArray(i[0])||(i=[i]),b=0;b<i.length;b+=1)if(m=i[b],(f=s.isConvex(m))||!n)m=f?s.clockwiseSort(m):s.hull(m),y.push({position:{x:e,y:t},vertices:m});else{var S=m.map((function(e){return[e.x,e.y]}));n.makeCCW(S),!1!==h&&n.removeCollinearPoints(S,h);var P=n.quickDecomp(S);for(v=0;v<P.length;v++){var C=P[v].map((function(e){return{x:e[0],y:e[1]}}));u>0&&s.area(C)<u||y.push({position:s.centre(C),vertices:C})}}for(v=0;v<y.length;v++)y[v]=a.create(r.extend(y[v],o));if(d)for(v=0;v<y.length;v++){var A=y[v];for(g=v+1;g<y.length;g++){var T=y[g];if(l.overlaps(A.bounds,T.bounds)){var B=A.vertices,E=T.vertices;for(x=0;x<A.vertices.length;x++)for(w=0;w<T.vertices.length;w++){var M=c.magnitudeSquared(c.sub(B[(x+1)%B.length],E[w])),_=c.magnitudeSquared(c.sub(B[x],E[(w+1)%E.length]));M<5&&_<5&&(B[x].isInternal=!0,E[w].isInternal=!0)}}}}return y.length>1?(p=a.create(r.extend({parts:y.slice(0)},o)),a.setPosition(p,{x:e,y:t}),p):y[0]}},{"../body/Body":1,"../core/Common":14,"../geometry/Bounds":26,"../geometry/Vector":28,"../geometry/Vertices":29}],24:[function(e,t,i){var o={};t.exports=o;var n=e("../body/Composite"),s=e("../constraint/Constraint"),r=e("../core/Common"),a=e("../body/Body"),l=e("./Bodies");o.stack=function(e,t,i,o,s,r,l){for(var c,d=n.create({label:"Stack"}),h=e,u=t,p=0,y=0;y<o;y++){for(var f=0,m=0;m<i;m++){var v=l(h,u,m,y,c,p);if(v){var g=v.bounds.max.y-v.bounds.min.y,x=v.bounds.max.x-v.bounds.min.x;g>f&&(f=g),a.translate(v,{x:.5*x,y:.5*g}),h=v.bounds.max.x+s,n.addBody(d,v),c=v,p+=1}else h+=s}u+=f+r,h=e}return d},o.chain=function(e,t,i,o,a,l){for(var c=e.bodies,d=1;d<c.length;d++){var h=c[d-1],u=c[d],p=h.bounds.max.y-h.bounds.min.y,y=h.bounds.max.x-h.bounds.min.x,f=u.bounds.max.y-u.bounds.min.y,m={bodyA:h,pointA:{x:y*t,y:p*i},bodyB:u,pointB:{x:(u.bounds.max.x-u.bounds.min.x)*o,y:f*a}},v=r.extend(m,l);n.addConstraint(e,s.create(v))}return e.label+=" Chain",e},o.mesh=function(e,t,i,o,a){var l,c,d,h,u,p=e.bodies;for(l=0;l<i;l++){for(c=1;c<t;c++)d=p[c-1+l*t],h=p[c+l*t],n.addConstraint(e,s.create(r.extend({bodyA:d,bodyB:h},a)));if(l>0)for(c=0;c<t;c++)d=p[c+(l-1)*t],h=p[c+l*t],n.addConstraint(e,s.create(r.extend({bodyA:d,bodyB:h},a))),o&&c>0&&(u=p[c-1+(l-1)*t],n.addConstraint(e,s.create(r.extend({bodyA:u,bodyB:h},a)))),o&&c<t-1&&(u=p[c+1+(l-1)*t],n.addConstraint(e,s.create(r.extend({bodyA:u,bodyB:h},a))))}return e.label+=" Mesh",e},o.pyramid=function(e,t,i,n,s,r,l){return o.stack(e,t,i,n,s,r,(function(t,o,r,c,d,h){var u=Math.min(n,Math.ceil(i/2)),p=d?d.bounds.max.x-d.bounds.min.x:0;if(!(c>u||r<(c=u-c)||r>i-1-c))return 1===h&&a.translate(d,{x:(r+(i%2==1?1:-1))*p,y:0}),l(e+(d?r*p:0)+r*s,o,r,c,d,h)}))},o.newtonsCradle=function(e,t,i,o,r){for(var a=n.create({label:"Newtons Cradle"}),c=0;c<i;c++){var d=l.circle(e+c*(1.9*o),t+r,o,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),h=s.create({pointA:{x:e+c*(1.9*o),y:t},bodyB:d});n.addBody(a,d),n.addConstraint(a,h)}return a},o.car=function(e,t,i,o,r){var c=a.nextGroup(!0),d=.5*-i+20,h=.5*i-20,u=n.create({label:"Car"}),p=l.rectangle(e,t,i,o,{collisionFilter:{group:c},chamfer:{radius:.5*o},density:2e-4}),y=l.circle(e+d,t+0,r,{collisionFilter:{group:c},friction:.8}),f=l.circle(e+h,t+0,r,{collisionFilter:{group:c},friction:.8}),m=s.create({bodyB:p,pointB:{x:d,y:0},bodyA:y,stiffness:1,length:0}),v=s.create({bodyB:p,pointB:{x:h,y:0},bodyA:f,stiffness:1,length:0});return n.addBody(u,p),n.addBody(u,y),n.addBody(u,f),n.addConstraint(u,m),n.addConstraint(u,v),u},o.softBody=function(e,t,i,n,s,a,c,d,h,u){h=r.extend({inertia:1/0},h),u=r.extend({stiffness:.2,render:{type:"line",anchors:!1}},u);var p=o.stack(e,t,i,n,s,a,(function(e,t){return l.circle(e,t,d,h)}));return o.mesh(p,i,n,c,u),p.label="Soft Body",p}},{"../body/Body":1,"../body/Composite":2,"../constraint/Constraint":12,"../core/Common":14,"./Bodies":23}],25:[function(e,t,i){var o={};t.exports=o;var n=e("../geometry/Vector"),s=e("../core/Common");o.fromVertices=function(e){for(var t={},i=0;i<e.length;i++){var o=(i+1)%e.length,r=n.normalise({x:e[o].y-e[i].y,y:e[i].x-e[o].x}),a=0===r.y?1/0:r.x/r.y;t[a=a.toFixed(3).toString()]=r}return s.values(t)},o.rotate=function(e,t){if(0!==t)for(var i=Math.cos(t),o=Math.sin(t),n=0;n<e.length;n++){var s,r=e[n];s=r.x*i-r.y*o,r.y=r.x*o+r.y*i,r.x=s}}},{"../core/Common":14,"../geometry/Vector":28}],26:[function(e,t,i){var o={};t.exports=o,o.create=function(e){var t={min:{x:0,y:0},max:{x:0,y:0}};return e&&o.update(t,e),t},o.update=function(e,t,i){e.min.x=1/0,e.max.x=-1/0,e.min.y=1/0,e.max.y=-1/0;for(var o=0;o<t.length;o++){var n=t[o];n.x>e.max.x&&(e.max.x=n.x),n.x<e.min.x&&(e.min.x=n.x),n.y>e.max.y&&(e.max.y=n.y),n.y<e.min.y&&(e.min.y=n.y)}i&&(i.x>0?e.max.x+=i.x:e.min.x+=i.x,i.y>0?e.max.y+=i.y:e.min.y+=i.y)},o.contains=function(e,t){return t.x>=e.min.x&&t.x<=e.max.x&&t.y>=e.min.y&&t.y<=e.max.y},o.overlaps=function(e,t){return e.min.x<=t.max.x&&e.max.x>=t.min.x&&e.max.y>=t.min.y&&e.min.y<=t.max.y},o.translate=function(e,t){e.min.x+=t.x,e.max.x+=t.x,e.min.y+=t.y,e.max.y+=t.y},o.shift=function(e,t){var i=e.max.x-e.min.x,o=e.max.y-e.min.y;e.min.x=t.x,e.max.x=t.x+i,e.min.y=t.y,e.max.y=t.y+o}},{}],27:[function(e,t,i){var o={};t.exports=o,e("../geometry/Bounds");var n=e("../core/Common");o.pathToVertices=function(e,t){"undefined"==typeof window||"SVGPathSeg"in window||n.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var i,s,r,a,l,c,d,h,u,p,y,f=[],m=0,v=0,g=0;t=t||15;var x=function(e,t,i){var o=i%2==1&&i>1;if(!u||e!=u.x||t!=u.y){u&&o?(p=u.x,y=u.y):(p=0,y=0);var n={x:p+e,y:y+t};!o&&u||(u=n),f.push(n),v=p+e,g=y+t}},b=function(e){var t=e.pathSegTypeAsLetter.toUpperCase();if("Z"!==t){switch(t){case"M":case"L":case"T":case"C":case"S":case"Q":v=e.x,g=e.y;break;case"H":v=e.x;break;case"V":g=e.y}x(v,g,e.pathSegType)}};for(o._svgPathToAbsolute(e),r=e.getTotalLength(),c=[],i=0;i<e.pathSegList.numberOfItems;i+=1)c.push(e.pathSegList.getItem(i));for(d=c.concat();m<r;){if((l=c[e.getPathSegAtLength(m)])!=h){for(;d.length&&d[0]!=l;)b(d.shift());h=l}switch(l.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":a=e.getPointAtLength(m),x(a.x,a.y,0)}m+=t}for(i=0,s=d.length;i<s;++i)b(d[i]);return f},o._svgPathToAbsolute=function(e){for(var t,i,o,n,s,r,a=e.pathSegList,l=0,c=0,d=a.numberOfItems,h=0;h<d;++h){var u=a.getItem(h),p=u.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(p))"x"in u&&(l=u.x),"y"in u&&(c=u.y);else switch("x1"in u&&(o=l+u.x1),"x2"in u&&(s=l+u.x2),"y1"in u&&(n=c+u.y1),"y2"in u&&(r=c+u.y2),"x"in u&&(l+=u.x),"y"in u&&(c+=u.y),p){case"m":a.replaceItem(e.createSVGPathSegMovetoAbs(l,c),h);break;case"l":a.replaceItem(e.createSVGPathSegLinetoAbs(l,c),h);break;case"h":a.replaceItem(e.createSVGPathSegLinetoHorizontalAbs(l),h);break;case"v":a.replaceItem(e.createSVGPathSegLinetoVerticalAbs(c),h);break;case"c":a.replaceItem(e.createSVGPathSegCurvetoCubicAbs(l,c,o,n,s,r),h);break;case"s":a.replaceItem(e.createSVGPathSegCurvetoCubicSmoothAbs(l,c,s,r),h);break;case"q":a.replaceItem(e.createSVGPathSegCurvetoQuadraticAbs(l,c,o,n),h);break;case"t":a.replaceItem(e.createSVGPathSegCurvetoQuadraticSmoothAbs(l,c),h);break;case"a":a.replaceItem(e.createSVGPathSegArcAbs(l,c,u.r1,u.r2,u.angle,u.largeArcFlag,u.sweepFlag),h);break;case"z":case"Z":l=t,c=i}"M"!=p&&"m"!=p||(t=l,i=c)}}},{"../core/Common":14,"../geometry/Bounds":26}],28:[function(e,t,i){var o={};t.exports=o,o.create=function(e,t){return{x:e||0,y:t||0}},o.clone=function(e){return{x:e.x,y:e.y}},o.magnitude=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},o.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y},o.rotate=function(e,t,i){var o=Math.cos(t),n=Math.sin(t);i||(i={});var s=e.x*o-e.y*n;return i.y=e.x*n+e.y*o,i.x=s,i},o.rotateAbout=function(e,t,i,o){var n=Math.cos(t),s=Math.sin(t);o||(o={});var r=i.x+((e.x-i.x)*n-(e.y-i.y)*s);return o.y=i.y+((e.x-i.x)*s+(e.y-i.y)*n),o.x=r,o},o.normalise=function(e){var t=o.magnitude(e);return 0===t?{x:0,y:0}:{x:e.x/t,y:e.y/t}},o.dot=function(e,t){return e.x*t.x+e.y*t.y},o.cross=function(e,t){return e.x*t.y-e.y*t.x},o.cross3=function(e,t,i){return(t.x-e.x)*(i.y-e.y)-(t.y-e.y)*(i.x-e.x)},o.add=function(e,t,i){return i||(i={}),i.x=e.x+t.x,i.y=e.y+t.y,i},o.sub=function(e,t,i){return i||(i={}),i.x=e.x-t.x,i.y=e.y-t.y,i},o.mult=function(e,t){return{x:e.x*t,y:e.y*t}},o.div=function(e,t){return{x:e.x/t,y:e.y/t}},o.perp=function(e,t){return{x:(t=!0===t?-1:1)*-e.y,y:t*e.x}},o.neg=function(e){return{x:-e.x,y:-e.y}},o.angle=function(e,t){return Math.atan2(t.y-e.y,t.x-e.x)},o._temp=[o.create(),o.create(),o.create(),o.create(),o.create(),o.create()]},{}],29:[function(e,t,i){var o={};t.exports=o;var n=e("../geometry/Vector"),s=e("../core/Common");o.create=function(e,t){for(var i=[],o=0;o<e.length;o++){var n=e[o],s={x:n.x,y:n.y,index:o,body:t,isInternal:!1};i.push(s)}return i},o.fromPath=function(e,t){var i=[];return e.replace(/L?\s*([\-\d\.e]+)[\s,]*([\-\d\.e]+)*/gi,(function(e,t,o){i.push({x:parseFloat(t),y:parseFloat(o)})})),o.create(i,t)},o.centre=function(e){for(var t,i,s,r=o.area(e,!0),a={x:0,y:0},l=0;l<e.length;l++)s=(l+1)%e.length,t=n.cross(e[l],e[s]),i=n.mult(n.add(e[l],e[s]),t),a=n.add(a,i);return n.div(a,6*r)},o.mean=function(e){for(var t={x:0,y:0},i=0;i<e.length;i++)t.x+=e[i].x,t.y+=e[i].y;return n.div(t,e.length)},o.area=function(e,t){for(var i=0,o=e.length-1,n=0;n<e.length;n++)i+=(e[o].x-e[n].x)*(e[o].y+e[n].y),o=n;return t?i/2:Math.abs(i)/2},o.inertia=function(e,t){for(var i,o,s=0,r=0,a=e,l=0;l<a.length;l++)o=(l+1)%a.length,s+=(i=Math.abs(n.cross(a[o],a[l])))*(n.dot(a[o],a[o])+n.dot(a[o],a[l])+n.dot(a[l],a[l])),r+=i;return t/6*(s/r)},o.translate=function(e,t,i){var o;if(i)for(o=0;o<e.length;o++)e[o].x+=t.x*i,e[o].y+=t.y*i;else for(o=0;o<e.length;o++)e[o].x+=t.x,e[o].y+=t.y;return e},o.rotate=function(e,t,i){if(0!==t){for(var o=Math.cos(t),n=Math.sin(t),s=0;s<e.length;s++){var r=e[s],a=r.x-i.x,l=r.y-i.y;r.x=i.x+(a*o-l*n),r.y=i.y+(a*n+l*o)}return e}},o.contains=function(e,t){for(var i=0;i<e.length;i++){var o=e[i],n=e[(i+1)%e.length];if((t.x-o.x)*(n.y-o.y)+(t.y-o.y)*(o.x-n.x)>0)return!1}return!0},o.scale=function(e,t,i,s){if(1===t&&1===i)return e;var r,a;s=s||o.centre(e);for(var l=0;l<e.length;l++)r=e[l],a=n.sub(r,s),e[l].x=s.x+a.x*t,e[l].y=s.y+a.y*i;return e},o.chamfer=function(e,t,i,o,r){t="number"==typeof t?[t]:t||[8],i=void 0!==i?i:-1,o=o||2,r=r||14;for(var a=[],l=0;l<e.length;l++){var c=e[l-1>=0?l-1:e.length-1],d=e[l],h=e[(l+1)%e.length],u=t[l<t.length?l:t.length-1];if(0!==u){var p=n.normalise({x:d.y-c.y,y:c.x-d.x}),y=n.normalise({x:h.y-d.y,y:d.x-h.x}),f=Math.sqrt(2*Math.pow(u,2)),m=n.mult(s.clone(p),u),v=n.normalise(n.mult(n.add(p,y),.5)),g=n.sub(d,n.mult(v,f)),x=i;-1===i&&(x=1.75*Math.pow(u,.32)),(x=s.clamp(x,o,r))%2==1&&(x+=1);for(var b=Math.acos(n.dot(p,y))/x,w=0;w<x;w++)a.push(n.add(n.rotate(m,b*w),g))}else a.push(d)}return a},o.clockwiseSort=function(e){var t=o.mean(e);return e.sort((function(e,i){return n.angle(t,e)-n.angle(t,i)})),e},o.isConvex=function(e){var t,i,o,n,s=0,r=e.length;if(r<3)return null;for(t=0;t<r;t++)if(o=(t+2)%r,n=(e[i=(t+1)%r].x-e[t].x)*(e[o].y-e[i].y),(n-=(e[i].y-e[t].y)*(e[o].x-e[i].x))<0?s|=1:n>0&&(s|=2),3===s)return!1;return 0!==s||null},o.hull=function(e){var t,i,o=[],s=[];for((e=e.slice(0)).sort((function(e,t){var i=e.x-t.x;return 0!==i?i:e.y-t.y})),i=0;i<e.length;i+=1){for(t=e[i];s.length>=2&&n.cross3(s[s.length-2],s[s.length-1],t)<=0;)s.pop();s.push(t)}for(i=e.length-1;i>=0;i-=1){for(t=e[i];o.length>=2&&n.cross3(o[o.length-2],o[o.length-1],t)<=0;)o.pop();o.push(t)}return o.pop(),s.pop(),o.concat(s)}},{"../core/Common":14,"../geometry/Vector":28}],30:[function(e,t,i){var o=t.exports=e("../core/Matter");o.Body=e("../body/Body"),o.Composite=e("../body/Composite"),o.World=e("../body/World"),o.Contact=e("../collision/Contact"),o.Detector=e("../collision/Detector"),o.Grid=e("../collision/Grid"),o.Pairs=e("../collision/Pairs"),o.Pair=e("../collision/Pair"),o.Query=e("../collision/Query"),o.Resolver=e("../collision/Resolver"),o.SAT=e("../collision/SAT"),o.Constraint=e("../constraint/Constraint"),o.MouseConstraint=e("../constraint/MouseConstraint"),o.Common=e("../core/Common"),o.Engine=e("../core/Engine"),o.Events=e("../core/Events"),o.Mouse=e("../core/Mouse"),o.Runner=e("../core/Runner"),o.Sleeping=e("../core/Sleeping"),o.Plugin=e("../core/Plugin"),o.Bodies=e("../factory/Bodies"),o.Composites=e("../factory/Composites"),o.Axes=e("../geometry/Axes"),o.Bounds=e("../geometry/Bounds"),o.Svg=e("../geometry/Svg"),o.Vector=e("../geometry/Vector"),o.Vertices=e("../geometry/Vertices"),o.Render=e("../render/Render"),o.RenderPixi=e("../render/RenderPixi"),o.World.add=o.Composite.add,o.World.remove=o.Composite.remove,o.World.addComposite=o.Composite.addComposite,o.World.addBody=o.Composite.addBody,o.World.addConstraint=o.Composite.addConstraint,o.World.clear=o.Composite.clear,o.Engine.run=o.Runner.run},{"../body/Body":1,"../body/Composite":2,"../body/World":3,"../collision/Contact":4,"../collision/Detector":5,"../collision/Grid":6,"../collision/Pair":7,"../collision/Pairs":8,"../collision/Query":9,"../collision/Resolver":10,"../collision/SAT":11,"../constraint/Constraint":12,"../constraint/MouseConstraint":13,"../core/Common":14,"../core/Engine":15,"../core/Events":16,"../core/Matter":17,"../core/Metrics":18,"../core/Mouse":19,"../core/Plugin":20,"../core/Runner":21,"../core/Sleeping":22,"../factory/Bodies":23,"../factory/Composites":24,"../geometry/Axes":25,"../geometry/Bounds":26,"../geometry/Svg":27,"../geometry/Vector":28,"../geometry/Vertices":29,"../render/Render":31,"../render/RenderPixi":32}],31:[function(e,t,i){var o={};t.exports=o;var n=e("../core/Common"),s=e("../body/Composite"),r=e("../geometry/Bounds"),a=e("../core/Events"),l=e("../collision/Grid"),c=e("../geometry/Vector"),d=e("../core/Mouse");!function(){var e,t;"undefined"!=typeof window&&(e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout((function(){e(n.now())}),1e3/60)},t=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),o.create=function(e){var t={controller:o,engine:null,element:null,canvas:null,mouse:null,frameRequestId:null,options:{width:800,height:600,pixelRatio:1,background:"#18181d",wireframeBackground:"#0f0f13",hasBounds:!!e.bounds,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showBroadphase:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showSeparations:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showShadows:!1,showVertexNumbers:!1,showConvexHulls:!1,showInternalEdges:!1,showMousePosition:!1}},s=n.extend(t,e);return s.canvas&&(s.canvas.width=s.options.width||s.canvas.width,s.canvas.height=s.options.height||s.canvas.height),s.mouse=e.mouse,s.engine=e.engine,s.canvas=s.canvas||i(s.options.width,s.options.height),s.context=s.canvas.getContext("2d"),s.textures={},s.bounds=s.bounds||{min:{x:0,y:0},max:{x:s.canvas.width,y:s.canvas.height}},1!==s.options.pixelRatio&&o.setPixelRatio(s,s.options.pixelRatio),n.isElement(s.element)?s.element.appendChild(s.canvas):s.canvas.parentNode||n.log("Render.create: options.element was undefined, render.canvas was created but not appended","warn"),s},o.run=function(t){!function i(n){t.frameRequestId=e(i),o.world(t)}()},o.stop=function(e){t(e.frameRequestId)},o.setPixelRatio=function(e,t){var i=e.options,o=e.canvas;"auto"===t&&(t=h(o)),i.pixelRatio=t,o.setAttribute("data-pixel-ratio",t),o.width=i.width*t,o.height=i.height*t,o.style.width=i.width+"px",o.style.height=i.height+"px",e.context.scale(t,t)},o.lookAt=function(e,t,i,o){o=void 0===o||o,t=n.isArray(t)?t:[t],i=i||{x:0,y:0};for(var s={min:{x:1/0,y:1/0},max:{x:-1/0,y:-1/0}},r=0;r<t.length;r+=1){var a=t[r],l=a.bounds?a.bounds.min:a.min||a.position||a,c=a.bounds?a.bounds.max:a.max||a.position||a;l&&c&&(l.x<s.min.x&&(s.min.x=l.x),c.x>s.max.x&&(s.max.x=c.x),l.y<s.min.y&&(s.min.y=l.y),c.y>s.max.y&&(s.max.y=c.y))}var h=s.max.x-s.min.x+2*i.x,u=s.max.y-s.min.y+2*i.y,p=e.canvas.height,y=e.canvas.width/p,f=h/u,m=1,v=1;f>y?v=f/y:m=y/f,e.options.hasBounds=!0,e.bounds.min.x=s.min.x,e.bounds.max.x=s.min.x+h*m,e.bounds.min.y=s.min.y,e.bounds.max.y=s.min.y+u*v,o&&(e.bounds.min.x+=.5*h-h*m*.5,e.bounds.max.x+=.5*h-h*m*.5,e.bounds.min.y+=.5*u-u*v*.5,e.bounds.max.y+=.5*u-u*v*.5),e.bounds.min.x-=i.x,e.bounds.max.x-=i.x,e.bounds.min.y-=i.y,e.bounds.max.y-=i.y,e.mouse&&(d.setScale(e.mouse,{x:(e.bounds.max.x-e.bounds.min.x)/e.canvas.width,y:(e.bounds.max.y-e.bounds.min.y)/e.canvas.height}),d.setOffset(e.mouse,e.bounds.min))},o.startViewTransform=function(e){var t=e.bounds.max.x-e.bounds.min.x,i=e.bounds.max.y-e.bounds.min.y,o=t/e.options.width,n=i/e.options.height;e.context.scale(1/o,1/n),e.context.translate(-e.bounds.min.x,-e.bounds.min.y)},o.endViewTransform=function(e){e.context.setTransform(e.options.pixelRatio,0,0,e.options.pixelRatio,0,0)},o.world=function(e){var t,i=e.engine,n=i.world,h=e.canvas,u=e.context,y=e.options,f=s.allBodies(n),m=s.allConstraints(n),v=y.wireframes?y.wireframeBackground:y.background,g=[],x=[],b={timestamp:i.timing.timestamp};if(a.trigger(e,"beforeRender",b),e.currentBackground!==v&&p(e,v),u.globalCompositeOperation="source-in",u.fillStyle="transparent",u.fillRect(0,0,h.width,h.height),u.globalCompositeOperation="source-over",y.hasBounds){for(t=0;t<f.length;t++){var w=f[t];r.overlaps(w.bounds,e.bounds)&&g.push(w)}for(t=0;t<m.length;t++){var S=m[t],P=S.bodyA,C=S.bodyB,A=S.pointA,T=S.pointB;P&&(A=c.add(P.position,S.pointA)),C&&(T=c.add(C.position,S.pointB)),A&&T&&(r.contains(e.bounds,A)||r.contains(e.bounds,T))&&x.push(S)}o.startViewTransform(e),e.mouse&&(d.setScale(e.mouse,{x:(e.bounds.max.x-e.bounds.min.x)/e.canvas.width,y:(e.bounds.max.y-e.bounds.min.y)/e.canvas.height}),d.setOffset(e.mouse,e.bounds.min))}else x=m,g=f;!y.wireframes||i.enableSleeping&&y.showSleeping?o.bodies(e,g,u):(y.showConvexHulls&&o.bodyConvexHulls(e,g,u),o.bodyWireframes(e,g,u)),y.showBounds&&o.bodyBounds(e,g,u),(y.showAxes||y.showAngleIndicator)&&o.bodyAxes(e,g,u),y.showPositions&&o.bodyPositions(e,g,u),y.showVelocity&&o.bodyVelocity(e,g,u),y.showIds&&o.bodyIds(e,g,u),y.showSeparations&&o.separations(e,i.pairs.list,u),y.showCollisions&&o.collisions(e,i.pairs.list,u),y.showVertexNumbers&&o.vertexNumbers(e,g,u),y.showMousePosition&&o.mousePosition(e,e.mouse,u),o.constraints(x,u),y.showBroadphase&&i.broadphase.controller===l&&o.grid(e,i.broadphase,u),y.showDebug&&o.debug(e,u),y.hasBounds&&o.endViewTransform(e),a.trigger(e,"afterRender",b)},o.debug=function(e,t){var i=t,o=e.engine,n=o.world,r=o.metrics,a=e.options;if(s.allBodies(n),o.timing.timestamp-(e.debugTimestamp||0)>=500){var l="";r.timing&&(l+="fps: "+Math.round(r.timing.fps)+"    "),e.debugString=l,e.debugTimestamp=o.timing.timestamp}if(e.debugString){i.font="12px Arial",a.wireframes?i.fillStyle="rgba(255,255,255,0.5)":i.fillStyle="rgba(0,0,0,0.5)";for(var c=e.debugString.split("\n"),d=0;d<c.length;d++)i.fillText(c[d],50,50+18*d)}},o.constraints=function(e,t){for(var i=t,o=0;o<e.length;o++){var s=e[o];if(s.render.visible&&s.pointA&&s.pointB){var r,a,l=s.bodyA,d=s.bodyB;if(r=l?c.add(l.position,s.pointA):s.pointA,"pin"===s.render.type)i.beginPath(),i.arc(r.x,r.y,3,0,2*Math.PI),i.closePath();else{if(a=d?c.add(d.position,s.pointB):s.pointB,i.beginPath(),i.moveTo(r.x,r.y),"spring"===s.render.type)for(var h,u=c.sub(a,r),p=c.perp(c.normalise(u)),y=Math.ceil(n.clamp(s.length/5,12,20)),f=1;f<y;f+=1)h=f%2==0?1:-1,i.lineTo(r.x+u.x*(f/y)+p.x*h*4,r.y+u.y*(f/y)+p.y*h*4);i.lineTo(a.x,a.y)}s.render.lineWidth&&(i.lineWidth=s.render.lineWidth,i.strokeStyle=s.render.strokeStyle,i.stroke()),s.render.anchors&&(i.fillStyle=s.render.strokeStyle,i.beginPath(),i.arc(r.x,r.y,3,0,2*Math.PI),i.arc(a.x,a.y,3,0,2*Math.PI),i.closePath(),i.fill())}}},o.bodyShadows=function(e,t,i){for(var o=i,n=(e.engine,0);n<t.length;n++){var s=t[n];if(s.render.visible){if(s.circleRadius)o.beginPath(),o.arc(s.position.x,s.position.y,s.circleRadius,0,2*Math.PI),o.closePath();else{o.beginPath(),o.moveTo(s.vertices[0].x,s.vertices[0].y);for(var r=1;r<s.vertices.length;r++)o.lineTo(s.vertices[r].x,s.vertices[r].y);o.closePath()}var a=s.position.x-.5*e.options.width,l=s.position.y-.2*e.options.height,c=Math.abs(a)+Math.abs(l);o.shadowColor="rgba(0,0,0,0.15)",o.shadowOffsetX=.05*a,o.shadowOffsetY=.05*l,o.shadowBlur=1+12*Math.min(1,c/1e3),o.fill(),o.shadowColor=null,o.shadowOffsetX=null,o.shadowOffsetY=null,o.shadowBlur=null}}},o.bodies=function(e,t,i){var o,n,s,r,a=i,l=(e.engine,e.options),c=l.showInternalEdges||!l.wireframes;for(s=0;s<t.length;s++)if((o=t[s]).render.visible)for(r=o.parts.length>1?1:0;r<o.parts.length;r++)if((n=o.parts[r]).render.visible){if(l.showSleeping&&o.isSleeping?a.globalAlpha=.5*n.render.opacity:1!==n.render.opacity&&(a.globalAlpha=n.render.opacity),n.render.sprite&&n.render.sprite.texture&&!l.wireframes){var d=n.render.sprite,h=u(e,d.texture);a.translate(n.position.x,n.position.y),a.rotate(n.angle),a.drawImage(h,h.width*-d.xOffset*d.xScale,h.height*-d.yOffset*d.yScale,h.width*d.xScale,h.height*d.yScale),a.rotate(-n.angle),a.translate(-n.position.x,-n.position.y)}else{if(n.circleRadius)a.beginPath(),a.arc(n.position.x,n.position.y,n.circleRadius,0,2*Math.PI);else{a.beginPath(),a.moveTo(n.vertices[0].x,n.vertices[0].y);for(var p=1;p<n.vertices.length;p++)!n.vertices[p-1].isInternal||c?a.lineTo(n.vertices[p].x,n.vertices[p].y):a.moveTo(n.vertices[p].x,n.vertices[p].y),n.vertices[p].isInternal&&!c&&a.moveTo(n.vertices[(p+1)%n.vertices.length].x,n.vertices[(p+1)%n.vertices.length].y);a.lineTo(n.vertices[0].x,n.vertices[0].y),a.closePath()}l.wireframes?(a.lineWidth=1,a.strokeStyle="#bbb",a.stroke()):(a.fillStyle=n.render.fillStyle,n.render.lineWidth&&(a.lineWidth=n.render.lineWidth,a.strokeStyle=n.render.strokeStyle,a.stroke()),a.fill())}a.globalAlpha=1}},o.bodyWireframes=function(e,t,i){var o,n,s,r,a,l=i,c=e.options.showInternalEdges;for(l.beginPath(),s=0;s<t.length;s++)if((o=t[s]).render.visible)for(a=o.parts.length>1?1:0;a<o.parts.length;a++){for(n=o.parts[a],l.moveTo(n.vertices[0].x,n.vertices[0].y),r=1;r<n.vertices.length;r++)!n.vertices[r-1].isInternal||c?l.lineTo(n.vertices[r].x,n.vertices[r].y):l.moveTo(n.vertices[r].x,n.vertices[r].y),n.vertices[r].isInternal&&!c&&l.moveTo(n.vertices[(r+1)%n.vertices.length].x,n.vertices[(r+1)%n.vertices.length].y);l.lineTo(n.vertices[0].x,n.vertices[0].y)}l.lineWidth=1,l.strokeStyle="#bbb",l.stroke()},o.bodyConvexHulls=function(e,t,i){var o,n,s,r=i;for(r.beginPath(),n=0;n<t.length;n++)if((o=t[n]).render.visible&&1!==o.parts.length){for(r.moveTo(o.vertices[0].x,o.vertices[0].y),s=1;s<o.vertices.length;s++)r.lineTo(o.vertices[s].x,o.vertices[s].y);r.lineTo(o.vertices[0].x,o.vertices[0].y)}r.lineWidth=1,r.strokeStyle="rgba(255,255,255,0.2)",r.stroke()},o.vertexNumbers=function(e,t,i){var o,n,s,r=i;for(o=0;o<t.length;o++){var a=t[o].parts;for(s=a.length>1?1:0;s<a.length;s++){var l=a[s];for(n=0;n<l.vertices.length;n++)r.fillStyle="rgba(255,255,255,0.2)",r.fillText(o+"_"+n,l.position.x+.8*(l.vertices[n].x-l.position.x),l.position.y+.8*(l.vertices[n].y-l.position.y))}}},o.mousePosition=function(e,t,i){var o=i;o.fillStyle="rgba(255,255,255,0.8)",o.fillText(t.position.x+"  "+t.position.y,t.position.x+5,t.position.y-5)},o.bodyBounds=function(e,t,i){var o=i,n=(e.engine,e.options);o.beginPath();for(var s=0;s<t.length;s++)if(t[s].render.visible)for(var r=t[s].parts,a=r.length>1?1:0;a<r.length;a++){var l=r[a];o.rect(l.bounds.min.x,l.bounds.min.y,l.bounds.max.x-l.bounds.min.x,l.bounds.max.y-l.bounds.min.y)}n.wireframes?o.strokeStyle="rgba(255,255,255,0.08)":o.strokeStyle="rgba(0,0,0,0.1)",o.lineWidth=1,o.stroke()},o.bodyAxes=function(e,t,i){var o,n,s,r,a=i,l=(e.engine,e.options);for(a.beginPath(),n=0;n<t.length;n++){var c=t[n],d=c.parts;if(c.render.visible)if(l.showAxes)for(s=d.length>1?1:0;s<d.length;s++)for(o=d[s],r=0;r<o.axes.length;r++){var h=o.axes[r];a.moveTo(o.position.x,o.position.y),a.lineTo(o.position.x+20*h.x,o.position.y+20*h.y)}else for(s=d.length>1?1:0;s<d.length;s++)for(o=d[s],r=0;r<o.axes.length;r++)a.moveTo(o.position.x,o.position.y),a.lineTo((o.vertices[0].x+o.vertices[o.vertices.length-1].x)/2,(o.vertices[0].y+o.vertices[o.vertices.length-1].y)/2)}l.wireframes?(a.strokeStyle="indianred",a.lineWidth=1):(a.strokeStyle="rgba(255, 255, 255, 0.4)",a.globalCompositeOperation="overlay",a.lineWidth=2),a.stroke(),a.globalCompositeOperation="source-over"},o.bodyPositions=function(e,t,i){var o,n,s,r,a=i,l=(e.engine,e.options);for(a.beginPath(),s=0;s<t.length;s++)if((o=t[s]).render.visible)for(r=0;r<o.parts.length;r++)n=o.parts[r],a.arc(n.position.x,n.position.y,3,0,2*Math.PI,!1),a.closePath();for(l.wireframes?a.fillStyle="indianred":a.fillStyle="rgba(0,0,0,0.5)",a.fill(),a.beginPath(),s=0;s<t.length;s++)(o=t[s]).render.visible&&(a.arc(o.positionPrev.x,o.positionPrev.y,2,0,2*Math.PI,!1),a.closePath());a.fillStyle="rgba(255,165,0,0.8)",a.fill()},o.bodyVelocity=function(e,t,i){var o=i;o.beginPath();for(var n=0;n<t.length;n++){var s=t[n];s.render.visible&&(o.moveTo(s.position.x,s.position.y),o.lineTo(s.position.x+2*(s.position.x-s.positionPrev.x),s.position.y+2*(s.position.y-s.positionPrev.y)))}o.lineWidth=3,o.strokeStyle="cornflowerblue",o.stroke()},o.bodyIds=function(e,t,i){var o,n,s=i;for(o=0;o<t.length;o++)if(t[o].render.visible){var r=t[o].parts;for(n=r.length>1?1:0;n<r.length;n++){var a=r[n];s.font="12px Arial",s.fillStyle="rgba(255,255,255,0.5)",s.fillText(a.id,a.position.x+10,a.position.y-10)}}},o.collisions=function(e,t,i){var o,n,s,r,a=i,l=e.options;for(a.beginPath(),s=0;s<t.length;s++)if((o=t[s]).isActive)for(n=o.collision,r=0;r<o.activeContacts.length;r++){var c=o.activeContacts[r].vertex;a.rect(c.x-1.5,c.y-1.5,3.5,3.5)}for(l.wireframes?a.fillStyle="rgba(255,255,255,0.7)":a.fillStyle="orange",a.fill(),a.beginPath(),s=0;s<t.length;s++)if((o=t[s]).isActive&&(n=o.collision,o.activeContacts.length>0)){var d=o.activeContacts[0].vertex.x,h=o.activeContacts[0].vertex.y;2===o.activeContacts.length&&(d=(o.activeContacts[0].vertex.x+o.activeContacts[1].vertex.x)/2,h=(o.activeContacts[0].vertex.y+o.activeContacts[1].vertex.y)/2),n.bodyB===n.supports[0].body||!0===n.bodyA.isStatic?a.moveTo(d-8*n.normal.x,h-8*n.normal.y):a.moveTo(d+8*n.normal.x,h+8*n.normal.y),a.lineTo(d,h)}l.wireframes?a.strokeStyle="rgba(255,165,0,0.7)":a.strokeStyle="orange",a.lineWidth=1,a.stroke()},o.separations=function(e,t,i){var o,n,s,r,a,l=i,c=e.options;for(l.beginPath(),a=0;a<t.length;a++)if((o=t[a]).isActive){s=(n=o.collision).bodyA;var d=1;(r=n.bodyB).isStatic||s.isStatic||(d=.5),r.isStatic&&(d=0),l.moveTo(r.position.x,r.position.y),l.lineTo(r.position.x-n.penetration.x*d,r.position.y-n.penetration.y*d),d=1,r.isStatic||s.isStatic||(d=.5),s.isStatic&&(d=0),l.moveTo(s.position.x,s.position.y),l.lineTo(s.position.x+n.penetration.x*d,s.position.y+n.penetration.y*d)}c.wireframes?l.strokeStyle="rgba(255,165,0,0.5)":l.strokeStyle="orange",l.stroke()},o.grid=function(e,t,i){var o=i;e.options.wireframes?o.strokeStyle="rgba(255,180,0,0.1)":o.strokeStyle="rgba(255,180,0,0.5)",o.beginPath();for(var s=n.keys(t.buckets),r=0;r<s.length;r++){var a=s[r];if(!(t.buckets[a].length<2)){var l=a.split(/C|R/);o.rect(.5+parseInt(l[1],10)*t.bucketWidth,.5+parseInt(l[2],10)*t.bucketHeight,t.bucketWidth,t.bucketHeight)}}o.lineWidth=1,o.stroke()},o.inspector=function(e,t){e.engine;var i,o=e.selected,n=e.render,s=n.options;if(s.hasBounds){var r=n.bounds.max.x-n.bounds.min.x,a=n.bounds.max.y-n.bounds.min.y,l=r/n.options.width,c=a/n.options.height;t.scale(1/l,1/c),t.translate(-n.bounds.min.x,-n.bounds.min.y)}for(var d=0;d<o.length;d++){var h=o[d].data;switch(t.translate(.5,.5),t.lineWidth=1,t.strokeStyle="rgba(255,165,0,0.9)",t.setLineDash([1,2]),h.type){case"body":i=h.bounds,t.beginPath(),t.rect(Math.floor(i.min.x-3),Math.floor(i.min.y-3),Math.floor(i.max.x-i.min.x+6),Math.floor(i.max.y-i.min.y+6)),t.closePath(),t.stroke();break;case"constraint":var u=h.pointA;h.bodyA&&(u=h.pointB),t.beginPath(),t.arc(u.x,u.y,10,0,2*Math.PI),t.closePath(),t.stroke()}t.setLineDash([]),t.translate(-.5,-.5)}null!==e.selectStart&&(t.translate(.5,.5),t.lineWidth=1,t.strokeStyle="rgba(255,165,0,0.6)",t.fillStyle="rgba(255,165,0,0.1)",i=e.selectBounds,t.beginPath(),t.rect(Math.floor(i.min.x),Math.floor(i.min.y),Math.floor(i.max.x-i.min.x),Math.floor(i.max.y-i.min.y)),t.closePath(),t.stroke(),t.fill(),t.translate(-.5,-.5)),s.hasBounds&&t.setTransform(1,0,0,1,0,0)};var i=function(e,t){var i=document.createElement("canvas");return i.width=e,i.height=t,i.oncontextmenu=function(){return!1},i.onselectstart=function(){return!1},i},h=function(e){var t=e.getContext("2d");return(window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)},u=function(e,t){var i=e.textures[t];return i||((i=e.textures[t]=new Image).src=t,i)},p=function(e,t){var i=t;/(jpg|gif|png)$/.test(t)&&(i="url("+t+")"),e.canvas.style.background=i,e.canvas.style.backgroundSize="contain",e.currentBackground=t}}()},{"../body/Composite":2,"../collision/Grid":6,"../core/Common":14,"../core/Events":16,"../core/Mouse":19,"../geometry/Bounds":26,"../geometry/Vector":28}],32:[function(e,t,i){var o={};t.exports=o;var n=e("../geometry/Bounds"),s=e("../body/Composite"),r=e("../core/Common"),a=e("../core/Events"),l=e("../geometry/Vector");!function(){var e,t;"undefined"!=typeof window&&(e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout((function(){e(r.now())}),1e3/60)},t=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),o.create=function(e){r.warn("RenderPixi.create: Matter.RenderPixi is deprecated (see docs)");var t={controller:o,engine:null,element:null,frameRequestId:null,canvas:null,renderer:null,container:null,spriteContainer:null,pixiOptions:null,options:{width:800,height:600,background:"#fafafa",wireframeBackground:"#222",hasBounds:!1,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showBroadphase:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showShadows:!1}},i=r.extend(t,e),n=!i.options.wireframes&&"transparent"===i.options.background;return i.pixiOptions=i.pixiOptions||{view:i.canvas,transparent:n,antialias:!0,backgroundColor:e.background},i.mouse=e.mouse,i.engine=e.engine,i.renderer=i.renderer||new PIXI.WebGLRenderer(i.options.width,i.options.height,i.pixiOptions),i.container=i.container||new PIXI.Container,i.spriteContainer=i.spriteContainer||new PIXI.Container,i.canvas=i.canvas||i.renderer.view,i.bounds=i.bounds||{min:{x:0,y:0},max:{x:i.options.width,y:i.options.height}},a.on(i.engine,"beforeUpdate",(function(){o.clear(i)})),i.textures={},i.sprites={},i.primitives={},i.container.addChild(i.spriteContainer),r.isElement(i.element)?i.element.appendChild(i.canvas):r.warn('No "render.element" passed, "render.canvas" was not inserted into document.'),i.canvas.oncontextmenu=function(){return!1},i.canvas.onselectstart=function(){return!1},i},o.run=function(t){!function i(n){t.frameRequestId=e(i),o.world(t)}()},o.stop=function(e){t(e.frameRequestId)},o.clear=function(e){for(var t=e.container,i=e.spriteContainer;t.children[0];)t.removeChild(t.children[0]);for(;i.children[0];)i.removeChild(i.children[0]);var o=e.sprites["bg-0"];e.textures={},e.sprites={},e.primitives={},e.sprites["bg-0"]=o,o&&t.addChildAt(o,0),e.container.addChild(e.spriteContainer),e.currentBackground=null,t.scale.set(1,1),t.position.set(0,0)},o.setBackground=function(e,t){if(e.currentBackground!==t){var i=t.indexOf&&-1!==t.indexOf("#"),o=e.sprites["bg-0"];if(i){var n=r.colorToNumber(t);e.renderer.backgroundColor=n,o&&e.container.removeChild(o)}else if(!o){var s=d(e,t);(o=e.sprites["bg-0"]=new PIXI.Sprite(s)).position.x=0,o.position.y=0,e.container.addChildAt(o,0)}e.currentBackground=t}},o.world=function(e){var t,i=e.engine.world,r=e.renderer,a=e.container,c=e.options,d=s.allBodies(i),h=s.allConstraints(i),u=[];c.wireframes?o.setBackground(e,c.wireframeBackground):o.setBackground(e,c.background);var p=e.bounds.max.x-e.bounds.min.x,y=e.bounds.max.y-e.bounds.min.y,f=p/e.options.width,m=y/e.options.height;if(c.hasBounds){for(t=0;t<d.length;t++){var v=d[t];v.render.sprite.visible=n.overlaps(v.bounds,e.bounds)}for(t=0;t<h.length;t++){var g=h[t],x=g.bodyA,b=g.bodyB,w=g.pointA,S=g.pointB;x&&(w=l.add(x.position,g.pointA)),b&&(S=l.add(b.position,g.pointB)),w&&S&&(n.contains(e.bounds,w)||n.contains(e.bounds,S))&&u.push(g)}a.scale.set(1/f,1/m),a.position.set(-e.bounds.min.x*(1/f),-e.bounds.min.y*(1/m))}else u=h;for(t=0;t<d.length;t++)o.body(e,d[t]);for(t=0;t<u.length;t++)o.constraint(e,u[t]);r.render(a)},o.constraint=function(e,t){e.engine;var i=t.bodyA,o=t.bodyB,n=t.pointA,s=t.pointB,a=e.container,l=t.render,c="c-"+t.id,d=e.primitives[c];d||(d=e.primitives[c]=new PIXI.Graphics),l.visible&&t.pointA&&t.pointB?(-1===r.indexOf(a.children,d)&&a.addChild(d),d.clear(),d.beginFill(0,0),d.lineStyle(l.lineWidth,r.colorToNumber(l.strokeStyle),1),i?d.moveTo(i.position.x+n.x,i.position.y+n.y):d.moveTo(n.x,n.y),o?d.lineTo(o.position.x+s.x,o.position.y+s.y):d.lineTo(s.x,s.y),d.endFill()):d.clear()},o.body=function(e,t){e.engine;var o=t.render;if(o.visible)if(o.sprite&&o.sprite.texture){var n="b-"+t.id,s=e.sprites[n],a=e.spriteContainer;s||(s=e.sprites[n]=i(e,t)),-1===r.indexOf(a.children,s)&&a.addChild(s),s.position.x=t.position.x,s.position.y=t.position.y,s.rotation=t.angle,s.scale.x=o.sprite.xScale||1,s.scale.y=o.sprite.yScale||1}else{var l="b-"+t.id,d=e.primitives[l],h=e.container;d||((d=e.primitives[l]=c(e,t)).initialAngle=t.angle),-1===r.indexOf(h.children,d)&&h.addChild(d),d.position.x=t.position.x,d.position.y=t.position.y,d.rotation=t.angle-d.initialAngle}};var i=function(e,t){var i=t.render.sprite.texture,o=d(e,i),n=new PIXI.Sprite(o);return n.anchor.x=t.render.sprite.xOffset,n.anchor.y=t.render.sprite.yOffset,n},c=function(e,t){var i,o=t.render,n=e.options,s=new PIXI.Graphics,a=r.colorToNumber(o.fillStyle),l=r.colorToNumber(o.strokeStyle),c=r.colorToNumber(o.strokeStyle),d=r.colorToNumber("#bbb"),h=r.colorToNumber("#CD5C5C");s.clear();for(var u=t.parts.length>1?1:0;u<t.parts.length;u++){i=t.parts[u],n.wireframes?(s.beginFill(0,0),s.lineStyle(1,d,1)):(s.beginFill(a,1),s.lineStyle(o.lineWidth,l,1)),s.moveTo(i.vertices[0].x-t.position.x,i.vertices[0].y-t.position.y);for(var p=1;p<i.vertices.length;p++)s.lineTo(i.vertices[p].x-t.position.x,i.vertices[p].y-t.position.y);s.lineTo(i.vertices[0].x-t.position.x,i.vertices[0].y-t.position.y),s.endFill(),(n.showAngleIndicator||n.showAxes)&&(s.beginFill(0,0),n.wireframes?s.lineStyle(1,h,1):s.lineStyle(1,c),s.moveTo(i.position.x-t.position.x,i.position.y-t.position.y),s.lineTo((i.vertices[0].x+i.vertices[i.vertices.length-1].x)/2-t.position.x,(i.vertices[0].y+i.vertices[i.vertices.length-1].y)/2-t.position.y),s.endFill())}return s},d=function(e,t){var i=e.textures[t];return i||(i=e.textures[t]=PIXI.Texture.fromImage(t)),i}}()},{"../body/Composite":2,"../core/Common":14,"../core/Events":16,"../geometry/Bounds":26,"../geometry/Vector":28}]},{},[30])(30)}).call(this,i(11))},function(e,t,i){"use strict";var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=o(i(0)),s=i(8),r=i(3),a=i(5);class l{constructor(e,t){this.x=e,this.y=t}}t.Vector=l;class c extends s.Cell{constructor(e,t,i){super(e,t,1,1),this.parent=i;let o=this.parent.map.grid.getCell(this.x,this.y);this.neighboor=o.neighboor}defineTexture(){let e=this.neighboor,t=["up","down","right","left","middle"];switch(e.top&&e.top.active&&(t=t.filter(e=>!e.includes("up"))),e.bottom&&e.bottom.active&&(t=t.filter(e=>!e.includes("down"))),e.right&&e.right.active&&(t=t.filter(e=>!e.includes("right"))),e.left&&e.left.active&&(t=t.filter(e=>!e.includes("left"))),1===t.length?this.side="MIDDLE":(t=t.filter(e=>!e.includes("middle")),this.side=t.join("-").toUpperCase()),this.side){case"UP":this.texture=a.TILE_TEXTURE.UP;break;case"DOWN":this.texture=a.TILE_TEXTURE.DOWN;break;case"LEFT":this.texture=a.TILE_TEXTURE.LEFT;break;case"RIGHT":this.texture=a.TILE_TEXTURE.RIGHT;break;case"MIDDLE":this.texture=a.TILE_TEXTURE.MIDDLE;break;case"UP-DOWN":this.texture=a.TILE_TEXTURE.HPIPE;break;case"RIGHT-LEFT":this.texture=a.TILE_TEXTURE.VPIPE;break;case"UP-DOWN-LEFT":this.texture=a.TILE_TEXTURE.LEFT_END;break;case"UP-DOWN-RIGHT":this.texture=a.TILE_TEXTURE.RIGHT_END;break;case"UP-RIGHT-LEFT":this.texture=a.TILE_TEXTURE.TOP_END;break;case"DOWN-RIGHT-LEFT":this.texture=a.TILE_TEXTURE.BOTTOM_END;break;case"UP-DOWN-RIGHT-LEFT":this.texture=a.TILE_TEXTURE.CUBE;break;case"UP-LEFT":this.texture=a.TILE_TEXTURE.UP_LEFT;break;case"UP-RIGHT":this.texture=a.TILE_TEXTURE.UP_RIGHT;break;case"DOWN-LEFT":this.texture=a.TILE_TEXTURE.DOWN_LEFT;break;case"DOWN-RIGHT":this.texture=a.TILE_TEXTURE.DOWN_RIGHT}this.texture||console.log(this.side)}}t.MapElement=class{constructor(e,t,i,o,s,r,a,d){switch(this.type=t,this.map=e,this.isStatic=d.isStatic,this.env=a,this.width=s*this.env.relToAbs,this.height=r*this.env.relToAbs,this.tiles=[],this.pos=new l(i*this.env.relToAbs+this.width/2,o*this.env.relToAbs+this.height/2),this.type){case"rect":this.body=n.Bodies.rectangle(this.pos.x,this.pos.y,this.width,this.height,Object.assign({isStatic:this.isStatic},d));for(let e=0;e<s;e++)for(let t=0;t<r;t++){let n=this.map.grid.getCell(i+e,o+t);n.toggleActive(!0),this.tiles.push(new c(n.x,n.y,this))}this.body.render.zIndex=this.isStatic?2:1,this.id=this.body.id;break;case"circle":this.body=n.Bodies.circle(this.pos.x,this.pos.y,(this.width+this.height)/2,Object.assign({isStatic:this.isStatic},d)),this.body.render.zIndex=this.isStatic?2:1,this.id=this.body.id}this.env.objects.push(this),n.World.add(this.env.world,this.body)}tileRender(){let e=[];return this.tiles.forEach(t=>{e.push(new r.RenderObject("rect",(t.x+t.width/2)*this.env.relToAbs,(t.y+t.height/2)*this.env.relToAbs,{width:t.width*this.env.relToAbs,height:t.height*this.env.relToAbs,texture:t.texture}))}),e}toRender(){switch(this.type){case"rect":return new r.RenderObject("poly",this.body.position.x,this.body.position.y,{vertices:this.body.vertices,zIndex:this.isStatic?2:1});case"circle":return new r.RenderObject("circle",this.body.position.x,this.body.position.y,{radius:this.body.circleRadius})}return!1}update(){}}},function(e,t){e.exports={physics:{collision:{collisionCategory:{body:16,arm:17,shot:16,wall:16},collisionGroup:{body:1,arm:2,shot:1,wall:1},collisionMask:{body:65537,arm:65537,wall:65537,shot:65537}},gravity:{scale:.00195}}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.RenderObject=class{constructor(e,t,i,o){switch(this.type=e,this.x=t,this.y=i,this.options=o,this.type){case"rect":this.width=this.options.width,this.height=this.options.height}}renderSprite(e,t){if(this.options.texture){let o=this.options.texture;switch(e.save(),e.translate(this.x,this.y),e.rotate(this.options.texture.rotation),this.options.flip&&e.scale(this.options.flip.x*o.scale.x,this.options.flip.y*o.scale.y),this.type){case"poly":const n=this.options.vertices;e.beginPath(),e.moveTo(n[0].x-t.x,n[0].y-t.y);for(var i=1;i<n.length;i++)e.lineTo(n[i].x-t.x,n[i].y-t.y);e.clip();case"rect":e.drawImage(o.image,-this.width/2+o.offset.x,-this.height/2+o.offset.y,this.width,this.height);break;case"circle":e.drawImage(o.image,-this.options.radius+o.offset.x,-this.options.radius+o.offset.y,2*this.options.radius,2*this.options.radius)}e.restore()}}render(e,t,i=!1){switch(this.options.interface||(this.x-=t.x,this.y-=t.y,this.options.hasOwnProperty("x2")&&this.options.hasOwnProperty("y2")&&(this.options.x2-=t.x,this.options.y2-=t.y)),this.type){case"rect":this.options.rounded?(e.lineJoin="round",e.lineWidth=i?1:this.options.roundRadius,i||e.fillRect(this.x-this.width/2+.5*this.options.roundRadius,this.y-this.height/2+.5*this.options.roundRadius,this.width-this.options.roundRadius,this.height-this.options.roundRadius),e.strokeRect(this.x-this.width/2+.5*this.options.roundRadius,this.y-this.height/2+.5*this.options.roundRadius,this.width-this.options.roundRadius,this.height-this.options.roundRadius)):(i||e.fillRect(this.x-this.width/2,this.y-this.height/2,this.width,this.height),e.strokeRect(this.x-this.width/2,this.y-this.height/2,this.width,this.height));break;case"circle":e.beginPath(),e.arc(this.x,this.y,this.options.radius,0,2*Math.PI),e.closePath();break;case"poly":let n=this.options.vertices;e.beginPath(),e.moveTo(n[0].x-t.x,n[0].y-t.y);for(var o=1;o<n.length;o++)e.lineTo(n[o].x-t.x,n[o].y-t.y);e.closePath();break;case"text":if(e.font=this.options.font||"16px Roboto","string"==typeof this.options.content)e.fillText(this.options.content,this.x,this.y);else if("object"==typeof this.options.content){let t=0;const i=16;this.options.content.forEach(o=>{e.fillText(o,this.x,this.y+t*i),t++})}case"line":e.beginPath(),e.moveTo(this.x,this.y),e.lineTo(this.options.x2,this.options.y2),e.closePath()}e.stroke(),i||e.fill()}};t.Renderer=class{static render(e,t,i){e.sort((e,t)=>e.options.zIndex-t.options.zIndex),e.forEach(e=>{e.render(t,i,!0)})}static renderSprite(e,t,i){e.sort((e,t)=>e.options.zIndex-t.options.zIndex),e.forEach(e=>{e.renderSprite(t,i)})}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.DOMEvent=class{constructor(e,t){this.event=e,this.callback=t,window.addEventListener(this.event,this.callback)}};t.Cooldown=class{constructor(e,t){this.delay=e,this.callback=t,window.setTimeout(this.callback,this.delay)}}},function(e,t,i){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=o(i(12)),s=o(i(13)),r=o(i(14)),a=o(i(15)),l=o(i(16)),c=o(i(17)),d=o(i(18)),h=o(i(19)),u=o(i(20));class p{constructor(e,t){this.x=e,this.y=t}}const y=new p(0,0),f=new p(1,1);class m{constructor(e,t){this.image=new Image,this.image.src=e,this.options=t||{},this.rotation=this.options.rotation||0,this.offset=this.options.offset||y,this.scale=this.options.scale||f}}t.Texture=m;class v extends m{constructor(e,t){super(e,t)}}t.Sprite=v;const g=new m(s.default),x=new m(s.default,{rotation:Math.PI}),b=new m(s.default,{rotation:-Math.PI/2}),w=new m(s.default,{rotation:Math.PI/2}),S=new m(n.default),P=new m(l.default),C=new m(l.default,{rotation:Math.PI/2}),A=new m(r.default),T=new m(r.default,{rotation:Math.PI}),B=new m(r.default,{rotation:Math.PI/2}),E=new m(r.default,{rotation:-Math.PI/2}),M=new m(a.default),_=new m(a.default,{rotation:Math.PI/2}),I=new m(a.default,{rotation:-Math.PI/2}),R=new m(a.default,{rotation:Math.PI}),k=new m(c.default),O=new v(d.default);t.PLAYER_BODY_SPRITE=O;const F=new v(h.default,{offset:new p(-7,0)});t.PLAYER_HEAD_SPRITE=F;const L=new v(u.default,{scale:new p(2,2)});t.BULLET_SPRITE=L;let V={UP:g,DOWN:x,LEFT:b,RIGHT:w,MIDDLE:S,HPIPE:P,VPIPE:C,TOP_END:A,BOTTOM_END:T,RIGHT_END:B,LEFT_END:E,UP_LEFT:M,UP_RIGHT:_,DOWN_LEFT:I,DOWN_RIGHT:R,CUBE:k};t.TILE_TEXTURE=V},function(e,t,i){"use strict";var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=o(i(0)),r=o(i(21)),a=i(1),l=i(3),c=i(22),d=i(4),h=i(23),u=i(5),p=n(i(24)),y=n(i(2)),f={ZERO:r.ZERO,ONE:r.ONE,TWO:r.TWO,THREE:r.THREE,FOUR:r.FOUR,FIVE:r.FIVE,SIX:r.SIX,SEVEN:r.SEVEN,EIGHT:r.EIGHT,NINE:r.NINE,A:r.A,B:r.B,C:r.C,D:r.D,E:r.E,F:r.F,G:r.G,H:r.H,I:r.I,J:r.J,K:r.K,L:r.L,M:r.M,N:r.N,O:r.O,P:r.P,Q:r.Q,R:r.R,S:r.S,T:r.T,U:r.U,V:r.V,W:r.W,X:r.X,Y:r.Y,Z:r.Z,ENTER:r.ENTER,SHIFT:r.SHIFT,ESC:r.ESC,SPACE:r.SPACE,LEFT:r.LEFT,UP:r.UP,RIGHT:r.RIGHT,DOWN:r.DOWN,BACKSPACE:r.BACKSPACE,DELETE:r.DELETE,TAB:r.TAB,TILDE:r.TILDE2},m=y.default.physics.collision;class v{constructor(e,t,i,o,n){this.name=e,this.pos=t,this.width=i,this.height=o,this.env=n,this.id=this.env.entities.length+1,this.velocity=new a.Vector(0,0),this.health=100,this.alive=this.health>0,this.groundForce=.04,this.airForce=.01,this.mass=5,this.jumpForce=.3,this.stoppingFriction=.7,this.onAir=!1,this.isMoving=!1,this.isCrouch=!1,this.createBody(),this.dir=this.env.cursorPosition.x>this.body.position.x?"left":"right",s.Body.setMass(this.body,this.mass)}createBody(){const e=1*this.height/3,t=2*this.height/3,i=1*this.height/3;this.crouchOffset=parseFloat((1.5*this.height/6).toFixed(2)),this.playerHead=s.Bodies.circle(this.pos.x,this.pos.y-e,this.width/2,{label:"PlayerCircle",render:{fillStyle:"red"}}),this.playerBody=s.Bodies.rectangle(this.pos.x,this.pos.y,this.width,t/2,{label:"PlayerRect",render:{fillStyle:"blue"}}),this.insideLegs=s.Bodies.rectangle(this.pos.x,this.pos.y+i,this.width,t/2,{label:"PlayerRect",render:{fillStyle:"green"}}),this.jumpSensor=s.Bodies.rectangle(this.pos.x,this.pos.y+this.height/2,this.width,4,{sleepThreshold:9e10,label:"PlayerRect",isSensor:!0,render:{fillStyle:"yellow"}}),this.playerLegs=s.Body.create({parts:[this.insideLegs,this.jumpSensor],label:"ComposedBody",restitution:.2}),this.playerArm=s.Bodies.rectangle(this.pos.x+this.width-5,this.playerBody.position.y,2*this.width/3,10,{label:"PlayerRect",inertia:1/0,sleepThreshold:1/0,collisionFilter:{group:m.collisionGroup.arm,category:m.collisionCategory.arm,mask:m.collisionMask.arm}});let o=[this.playerBody,this.playerHead,this.playerLegs,this.jumpSensor];this.idArray=o.concat([this.playerArm]).map(e=>e.id),this.body=s.Body.create({parts:[this.playerBody,this.playerHead,this.playerLegs,this.jumpSensor],inertia:1/0,friction:.01,frictionAir:.01,frictionStatic:.25,restitution:.14,sleepThreshold:1/0,collisionFilter:{group:m.collisionGroup.body,category:m.collisionCategory.body,mask:m.collisionMask.body}}),this.armConstraint=s.Constraint.create({bodyA:this.body,pointA:{x:this.width/2-5,y:0},bodyB:this.playerArm,pointB:{x:-this.width/2,y:0},stiffness:1,length:0}),this.composite=s.Composite.create({label:"Player",bodies:[this.body,this.playerArm],constraints:[this.armConstraint]})}flipDirection(){this.dir="left"===this.dir?"right":"left";let e="left"===this.dir?1:-1;s.Composite.remove(this.composite,this.armConstraint),s.Body.setAngle(this.playerArm,0),this.armConstraint=s.Constraint.create({bodyA:this.body,pointA:{x:e*this.width/2-5*e,y:0},bodyB:this.playerArm,pointB:{x:-this.width/2,y:0},stiffness:1,length:0}),s.Composite.add(this.composite,this.armConstraint),s.Body.setAngle(this.playerArm,this.angle),s.Body.setInertia(this.body,1/0),s.Body.setInertia(this.playerArm,1/0)}distTo(e){const t=this.pos.x-e.pos.x,i=this.pos.y-e.pos.y;return Math.sqrt(Math.pow(t,2)+Math.pow(i,2))}getCloserPlayer(){return this.env.entities.sort((e,t)=>this.distTo(e)-this.distTo(t))[1]}hitBy(e,t){this.health-=e.damage,this.health<0&&(this.health=0),this.env.removeShot(e);new h.ParticuleGenerator(5,this.body.position,200,this.env)}checkDeath(){this.alive=!(this.health<=0||this.pos.y>this.env.height),this.alive||console.log(`${this.name} vient de mourir`)}toRender(){let e=[];return this.composite.bodies.forEach(t=>{t.parts.forEach(t=>{switch(t.label){case"PlayerRect":e.push(new l.RenderObject("poly",t.position.x,t.position.y,{vertices:t.vertices}));break;case"PlayerCircle":e.push(new l.RenderObject("circle",t.position.x,t.position.y,{radius:t.circleRadius}));break;case"ComposedBody":t.parts.forEach(i=>{e.push(new l.RenderObject("poly",t.position.x,t.position.y,{vertices:t.vertices}))})}})}),this.composite.constraints.forEach(t=>{e.push(new l.RenderObject("line",t.bodyA.position.x+t.pointA.x,t.bodyA.position.y+t.pointA.y,{x2:t.bodyB.position.x+t.pointB.x,y2:t.bodyB.position.y+t.pointB.y}))}),e}toRenderSprite(){if(!this.alive)return;let e=[];return e.push(new l.RenderObject("rect",this.pos.x,this.pos.y+this.width/3,{width:this.width,height:2*this.height/3,texture:u.PLAYER_BODY_SPRITE,flip:new a.Vector("left"===this.dir?1:-1,1)})),e.push(new l.RenderObject("circle",this.playerHead.position.x,this.playerHead.position.y,{radius:this.playerHead.circleRadius,texture:u.PLAYER_HEAD_SPRITE,flip:new a.Vector("left"===this.dir?1:-1,1)})),e}update(){this.alive&&(this.onAir=0===this.env.objects.filter(e=>{let t=s.SAT.collides(e.body,this.jumpSensor);return t.collided&&0===t.axisNumber}).length,this.isMoving&&!(this.body.speed>12)||this.onAir?this.isMoving=!1:s.Body.setVelocity(this.body,{x:this.body.velocity.x*this.stoppingFriction,y:this.body.velocity.y*this.stoppingFriction}),this.pos=new a.Vector(this.body.position.x,this.body.position.y),this.checkDeath())}}t.Entity=v;t.Player=class extends v{constructor(e,t,i,o,n,s,r=!1){super(e,new a.Vector(t+o/2,i+n/2),o,n,s),this.cameraFocus=!1,this.cameraFocus=r,this.nbJump=0,this.wallSlide=!1,this.wallSlideSide="no-collision",this.weapon=new c.AR(this),this.env.events.push(new d.DOMEvent("mousedown",()=>this.weapon.shoot())),this.env.events.push(new d.DOMEvent("mouseup",()=>this.weapon.stopShoot())),this.env.addEntity(this),this.initSetup(p.default)}initSetup(e){Object.keys(e.keybind).forEach(t=>{let i=e.keybind[t];"string"==typeof i?this.assignKey(t,i):"object"==typeof i&&i.forEach(e=>{this.assignKey(t,e)})}),r.run(()=>r.tick())}assignKey(e,t){let i=f[t];switch(e){case"move_forward":i.down(()=>this.move("right"));break;case"move_backward":i.down(()=>this.move("left"));break;case"jump":i.press(()=>this.jump());break;case"crouch":i.down(()=>this.crouch()),i.up(()=>this.uncrouch());break;case"dash":i.press(()=>console.log("grappeln"));break;case"reload":i.press(()=>this.weapon.reload())}r.F.press(()=>this.slowMotion()),r.E.press(()=>this.autoShoot()),r.G.press(()=>this.env.swicthRenderer())}move(e){if(this.body.speed<=12&&"jump"!==this.wallSlideSide){const t="left"===e?-1:1,i=this.onAir?this.airForce:this.groundForce;this.body.force.x=t*i,this.isMoving=!0}}jump(){if(!this.onAir||this.nbJump<2){const e=1===this.nbJump?.8*this.jumpForce:this.jumpForce;let t=0;this.wallSlide&&"no-collision"!==this.wallSlideSide&&(t="left"===this.wallSlideSide?4*-this.groundForce:4*this.groundForce,this.wallSlideSide="jump"),s.Body.applyForce(this.body,this.pos,{x:t,y:.12*e*this.mass}),this.body.force.y=-e,s.Body.setVelocity(this.body,{x:this.body.velocity.x,y:0}),this.nbJump++}}crouch(){this.isCrouch||(s.Body.translate(this.playerLegs,{x:0,y:-this.crouchOffset}),s.Body.set(this.body,"airFriction",.01/3),this.isCrouch=!0)}uncrouch(){this.isCrouch&&(s.Body.translate(this.playerLegs,{x:0,y:this.crouchOffset}),s.Body.set(this.body,"airFriction",.01),this.isCrouch=!1)}autoShoot(){const e=this.getCloserPlayer();e&&(this.lookAt(e.playerHead.position),this.weapon.singleShoot())}slowMotion(){if(1===this.env.timescale){this.env.changeTimeScale(.33);new d.Cooldown(600,()=>this.env.changeTimeScale(1))}}lookAt(e){this.angle=Math.atan2(e.y-this.pos.y,e.x-this.pos.x);let t=new a.Vector(0,0);"right"===this.dir?t={x:this.body.position.x+this.width/2-5,y:this.body.position.y}:"left"===this.dir&&(t={x:this.body.position.x-this.width/2+5,y:this.body.position.y});const i=s.Vector.angle(t,e);s.Vector.angle(this.body.position,e);s.Body.rotate(this.playerArm,i-this.playerArm.angle,t);const o="left"===this.dir?-1:1;Math.cos(this.angle)*o>0&&this.flipDirection()}onGround(){this.nbJump=0}toRender(){let e=[];this.composite.bodies.forEach(t=>{t.parts.forEach(t=>{switch(t.label){case"PlayerRect":e.push(new l.RenderObject("poly",t.position.x,t.position.y,{vertices:t.vertices,texture:u.PLAYER_BODY_SPRITE}));break;case"PlayerCircle":e.push(new l.RenderObject("circle",t.position.x,t.position.y,{radius:t.circleRadius,texture:u.PLAYER_HEAD_SPRITE}));break;case"ComposedBody":t.parts.forEach(i=>{e.push(new l.RenderObject("poly",t.position.x,t.position.y,{vertices:t.vertices}))})}})}),this.composite.constraints.forEach(t=>{e.push(new l.RenderObject("line",t.bodyA.position.x+t.pointA.x,t.bodyA.position.y+t.pointA.y,{x2:t.bodyB.position.x+t.pointB.x,y2:t.bodyB.position.y+t.pointB.y}))});let t=new l.RenderObject("text",10,20,{content:[`motion: ${this.body.motion.toFixed(3)}`,`speed: ${this.body.speed.toFixed(3)}`,`velocity: {x: ${this.body.velocity.x.toFixed(0)}, y: ${this.body.velocity.y.toFixed(0)}}`,`position: {x: ${this.body.position.x.toFixed(0)}, y: ${this.body.position.y.toFixed(0)}}`,`angle: ${(180*this.angle/Math.PI).toFixed(2)}°`,`mass: ${this.body.mass}`,`inertia: ${this.body.inertia}`,`onAir: ${this.onAir}`,`isCrouching: ${this.isCrouch}`,`isMoving: ${this.isMoving}`,`wallSlide: ${this.wallSlide}`,`wallSlideSide: ${this.wallSlideSide}`,`frictionStatic: ${this.body.frictionStatic}`,`friction: ${this.body.friction.toFixed(4)}`,`direction: ${this.dir}`,`camera : ${this.env.camera.x.toFixed(2)}, ${this.env.camera.y.toFixed(2)}`,`number of bodies: ${s.Composite.allBodies(this.env.world).length}`],interface:!0});return e.push(t),e}update(){if(!this.alive)return;this.lookAt(this.env.cursorPosition),this.onAir=0===this.env.objects.filter(e=>{"circle"==e.type&&console.log(e);let t=s.SAT.collides(e.body,this.jumpSensor);return t.collided&&0===t.axisNumber}).length;let e=0!==this.env.objects.filter(e=>{let t=s.SAT.collides(e.body,this.jumpSensor);return t.collided&&1===t.axisNumber&&(this.wallSlideSide=t.bodyA.position.x>t.bodyB.position.x?"left":"right"),t.collided&&1===t.axisNumber}).length&&this.body.velocity.y>0;this.wallSlide=e&&this.isMoving,this.onAir||this.onGround(),this.wallSlide?this.nbJump=1:this.wallSlideSide="no-collision",this.isMoving&&!(this.body.speed>12)||this.onAir?this.isMoving=!1:s.Body.setVelocity(this.body,{x:this.body.velocity.x*this.stoppingFriction,y:this.body.velocity.y*this.stoppingFriction}),this.wallSlide&&0==this.body.friction&&console.log("FrictionError"),this.pos=new a.Vector(this.body.position.x,this.body.position.y),this.checkDeath()}}},function(e,t,i){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=i(10),s=i(26),r=i(6),a=i(27),l=o(i(28));t.DEBUG=!1;document.querySelector("main");const c=document.createElement("canvas"),d=(c.getContext("2d"),new s.Map(l.default));let h=new n.Env(c,d,"local"),u=new r.Player("Dorian",300,200,50,80,h,!0),p=new a.Enemy("Bad Guy",200,200,40,88,h);new a.Enemy("Bad Guy 2 ",2200,200,40,88,h);window.env=h,window.player=u,window.enemy1=p,window.onload=()=>{h.update(),c.focus()}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Grid=class{constructor(e,t){this.rows=t,this.cols=e,this.cells=[],this.createCells(),this.defineNeighboors()}createCells(){for(let e=0;e<this.cols;e++)for(let t=0;t<this.rows;t++)this.cells.push(new o(t,e))}getCell(e,t){let i=this.cells.filter(i=>i.x===e&&i.y===t);if(0!==i.length)return i[0];console.error(`La cellule (x: ${e}, y: ${t}) n'existe pas`)}updateCell(e){this.cells.includes(e)&&(console.log(e),this.defineNeighboors(),this.cells[this.cells.indexOf(e)]=e)}defineNeighboors(){this.cells.forEach(e=>{e.neighboor.top=e.y>=1?this.cells.filter(t=>t.x<=e.x&&t.x+t.width>e.x&&t.y===e.y-e.height)[0]:null,e.neighboor.bottom=e.y<=this.rows-1?this.cells.filter(t=>t.x<=e.x&&t.x+t.width>e.x&&t.y===e.y+e.height)[0]:null,e.neighboor.left=e.x>=1?this.cells.filter(t=>t.y<=e.y&&t.y+t.height>e.y&&t.x===e.x-e.width)[0]:null,e.neighboor.right=e.x<=this.rows-1?this.cells.filter(t=>t.y<=e.y&&t.y+t.height>e.y&&t.x===e.x+e.width)[0]:null})}};class o{constructor(e,t,i=1,o=1){this.x=e,this.y=t,this.width=i,this.height=o,this.neighboor={},this.active=!1}toggleActive(e){this.active=e||!this.active}}t.Cell=o},function(e,t,i){e.exports=i(7)},function(e,t,i){"use strict";var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=o(i(0)),r=o(i(7)),a=i(1),l=i(6),c=i(4),d=i(5),h=i(3),u=n(i(25)),p=n(i(2)).default.physics.gravity.scale;let y=r.DEBUG;const f={pixelRatio:"auto",background:"#bbb",wireframeBackground:"#222",hasBounds:!0,enabled:!0,wireframes:y,showSleeping:!0,showDebug:y,showBroadphase:y,showBounds:y,showVelocity:y,showCollisions:y,showSeparations:!1,showAxes:!1,showPositions:y,showAngleIndicator:!1,showIds:y,showShadows:!1,showVertexNumbers:!1,showConvexHulls:!1,showInternalEdges:!1,showMousePosition:!1};t.Env=class{constructor(e,t,i="local"){this.width=0,this.height=0,this.tick=0,this.scale=1,this.timescale=1,this.framerate=60,this.canvas=e,this.ctx=e.getContext("2d"),this.map=t,this.gridWidth=t.tileWidth,this.gridHeight=t.tileWidth,this.engine=s.Engine.create({enableSleeping:!0}),this.engineRunner=s.Runner.create({}),this.renderMode=i,this.world=this.engine.world,this.world.gravity.scale=0,this.entities=[],this.shots=[],this.objects=[],this.particles=[],this.events=[],this.renderingStack=[],this.cursorPosition=new a.Vector(0,0),this.sizeCanvas(),this.relToAbs=Math.min(this.width/this.gridWidth,this.height/this.gridHeight),this.mapWidth=this.map.dimensions.width*this.relToAbs,this.mapHeight=this.map.dimensions.height*this.relToAbs,this.oldRelToAbs=new a.Vector(0,0),Object.assign(this.oldRelToAbs,this.relToAbs),this.events.push(new c.DOMEvent("mousemove",e=>this.updateCursorPosition(e))),this.initMatterEngine(),this.initRender(),this.initMap()}getWindowDimensions(){const e=document.scrollingElement;return[window.outerWidth,e.clientHeight]}sizeCanvas(){const e=window.devicePixelRatio||1;[this.width,this.height]=this.getWindowDimensions(),"local"===this.renderMode&&([this.canvas.width,this.canvas.height]=[this.width*e,this.height*e],[this.canvas.style.width,this.canvas.style.height]=[this.width+"px",this.height+"px"],this.canvas.style.backgroundColor=u.default.canvasBackground,document.querySelector("main").appendChild(this.canvas),this.ctx.scale(e,e))}initMatterEngine(){this.world.gravity.scale=0,s.Events.on(this.engine,"beforeUpdate",e=>{s.Composite.allBodies(this.engine.world).forEach(e=>{e.isStatic||e.isSleeping||"Shot"===e.label||(e.force.y+=e.mass*p)})}),s.Events.on(this.engine,"collisionStart",e=>{const t=e.pairs.filter(e=>"Shot"===e.bodyA.label||"Shot"===e.bodyB.label);if(t.length>0)for(let e of t){const t="Shot"===e.bodyA.label?e.bodyA:e.bodyB,i=t===e.bodyA?e.bodyB:e.bodyA;if("Wall"===i.label){const e=this.shots.filter(e=>e.id===t.id)[0];e&&e.destroy()}else"PlayerRect"!=i.label&&"PlayerCircle"!=i.label||this.collision(t,i)}})}initRender(){if("matter-js"===this.renderMode&&!document.querySelector("[data-pixel-ratio]")){let e=Object.assign(f,{width:this.width,height:this.height});this.renderer=s.Render.create({element:document.body,engine:this.engine,options:e}),s.Events.on(this.renderer,"beforeRender",e=>{s.Composite.allBodies(this.world).sort((e,t)=>(e.render&&void 0!==e.render.zIndex?e.render.zIndex:1)-(t.render&&void 0!==t.render.zIndex?t.render.zIndex:1))}),s.Render.run(this.renderer)}this.camera=new m(0,0,this.width,this.height,this)}initMap(){this.objects=[],s.World.clear(this.world,!1),this.map.init(this),this.objects.forEach(e=>{e.tiles.forEach(e=>{e.defineTexture()})})}addEntity(e){this.entities.push(e),s.World.add(this.world,e.composite),e instanceof l.Player&&e.cameraFocus&&this.camera.setFocus(e)}addShot(e){this.shots.push(e),s.World.add(this.world,e.body)}removeShot(e){this.shots=this.shots.filter(t=>t.id===e.id),s.World.remove(this.world,e.body)}collision(e,t){const i=this.shots.filter(t=>t.id===e.id)[0];if(i&&i.player.idArray.includes(t.id))return!1;const o=this.entities.filter(e=>e.idArray.includes(t.id))[0];return o&&i&&o.hitBy(i,t),null!=o}changeTimeScale(e){this.timescale=e,this.engine.timing.timeScale=this.timescale}updateCursorPosition(e){const t=this.canvas.getBoundingClientRect();this.cursorPosition=new a.Vector(e.clientX+this.camera.x-t.left,e.clientY+this.camera.y-t.top)}addToRenderingStack(e){this.renderingStack.push(e)}swicthRenderer(){this.renderMode="local"===this.renderMode?"matter-js":"local",console.log("New render mode is",this.renderMode),"matter-js"===this.renderMode?(this.canvas.style.display="none",this.renderer||(this.renderer=s.Render.create({element:document.body,engine:this.engine,options:f})),s.Render.run(this.renderer)):"local"===this.renderMode&&(this.renderer&&s.Render.stop(this.renderer),this.canvas.style.display="inherit",this.sizeCanvas())}update(){s.Runner.tick(this.engineRunner,this.engine,1/this.framerate),this.objects.forEach(e=>e.update()),this.shots.forEach(e=>e.update()),this.particles.forEach(e=>e.update()),this.entities.forEach(e=>e.update()),this.camera.update(),"local"===this.renderMode&&this.render(),this.tick++,requestAnimationFrame(()=>this.update())}render(){this.renderingStack=[];let e=this.camera.safe_zone.x1,t=this.camera.safe_zone.x2,i=new h.RenderObject("line",e,this.camera.width/2,{x2:t,y2:this.camera.width/2,interface:!0});this.addToRenderingStack(i),this.objects.forEach(e=>{let t=e.toRender();t&&this.addToRenderingStack(t)}),this.objects.forEach(e=>{e.tileRender().forEach(e=>{this.addToRenderingStack(e)})}),this.shots.forEach(e=>{const t=e.body.position;let i=new h.RenderObject("poly",t.x,t.y,{vertices:e.body.vertices,texture:d.BULLET_SPRITE});this.addToRenderingStack(i)}),this.particles.forEach(e=>e.render(this)),this.entities.forEach(e=>{let t=e.toRender();t&&t.forEach(e=>{this.addToRenderingStack(e)})}),this.entities.forEach(e=>{let t=e.toRenderSprite();t&&t.forEach(e=>{this.addToRenderingStack(e)})}),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),h.Renderer.render(this.renderingStack,this.ctx,this.camera),h.Renderer.renderSprite(this.renderingStack,this.ctx,this.camera)}};class m{constructor(e,t,i,o,n){this.focus=void 0,this.env=n,this.x=e,this.y=t,this.zoom=1,this.width=i/this.zoom,this.height=o/this.zoom,this.safe_zone_size=this.width/5,this.safe_zone={x1:this.width/2-this.safe_zone_size/2,x2:this.width/2+this.safe_zone_size/2,y1:this.height,y2:this.height/3},this.follow_x=!0,this.follow_y=!0,"matter-js"==this.env.renderMode&&(this.env.renderer.bounds.max.x*=this.zoom,this.env.renderer.bounds.max.y*=this.zoom)}setFocus(e){this.focus=e}include(e){return!0}update(){if(this.focus){let e=this.focus.pos.x,t=this.focus.pos.y;if(this.follow_x){let t=0;e<=this.x+this.safe_zone.x1?(t=e-this.x-this.safe_zone.x1,this.x+=t):e>=this.x+this.safe_zone.x2&&(t=e-this.x-this.safe_zone.x2,this.x+=t),"matter-js"==this.env.renderMode&&s.Bounds.translate(this.env.renderer.bounds,{x:t,y:0})}if(this.follow_y&&t<=this.safe_zone.y2){let e=0;e=t-this.y-this.safe_zone.y2,this.y+=e}}}}t.Camera=m},function(e,t){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(e){"object"==typeof window&&(i=window)}e.exports=i},function(e,t,i){e.exports=i.p+"c1a1c8f6dc84dc0e4805b35e04fa5c74.png"},function(e,t,i){e.exports=i.p+"693869bbefa52bcb3524a779fb2d2419.png"},function(e,t,i){e.exports=i.p+"96ad6616368eef747c30e33a2832e309.png"},function(e,t,i){e.exports=i.p+"ec6d59570816c438b9e8c8429b6eed69.png"},function(e,t,i){e.exports=i.p+"b9723e3ec85d2b595f0094e1087a6690.png"},function(e,t,i){e.exports=i.p+"b96d2f10c032fe74fc5d323f1fd11415.png"},function(e,t,i){e.exports=i.p+"c3f38c7f142e8dd0486e82d6ade4a045.png"},function(e,t,i){e.exports=i.p+"1fd31f004685f8f3345c18774f32f152.png"},function(e,t,i){e.exports=i.p+"3978b167af1ff330f344ccd1c3bbe915.png"},function(e,t,i){var o;/*! keydrown - v1.2.7 - 2018-12-19 - http://jeremyckahn.github.com/keydrown */!function(n){var s=function(){var e={forEach:function(e,t){var i;for(i in e)e.hasOwnProperty(i)&&t(e[i],i)}},t=e.forEach;e.getTranspose=function(e){var i={};return t(e,(function(e,t){i[e]=t})),i},e.indexOf=function(e,t){if(e.indexOf)return e.indexOf(t);var i,o=e.length;for(i=0;i<o;i++)if(e[i]===t)return i;return-1};var i=e.indexOf;return e.pushUnique=function(e,t){return-1===i(e,t)&&(e.push(t),!0)},e.removeValue=function(e,t){var o=i(e,t);if(-1!==o)return e.splice(o,1)[0]},e.documentOn=function(e,t){n.addEventListener?n.addEventListener(e,t,!1):document.attachEvent&&document.attachEvent("on"+e,t)},e.requestAnimationFrame=n.requestAnimationFrame||n.webkitRequestAnimationFrame||n.mozRequestAnimationFrame||function(e){n.setTimeout(e,1e3/60)},e.noop=function(){},e}(),r={ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,ENTER:13,SHIFT:16,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,BACKSPACE:8,DELETE:46,TAB:9,TILDE:192},a=s.getTranspose(r),l=[],c=function(){"use strict";function e(e){this.keyCode=e,this.cachedKeypressEvent=null}
/*!
   * The function to be invoked on every tick that the key is held down for.
   *
   * @type {function}
   */
/*!
   * Private helper function that binds or invokes a hander for `down`, `up',
   * or `press` for a `Key`.
   *
   * @param {Key} key
   * @param {string} handlerName
   * @param {function=} opt_handler If omitted, the handler is invoked.
   * @param {KeyboardEvent=} opt_evt If this function is being called by a
   * keyboard event handler, this is the raw KeyboardEvent Object provided from
   * the browser.
   */
function t(e,t,i,o){i?e[t]=i:e[t](o)}return e.prototype._downHandler=s.noop,
/*!
   * The function to be invoked when the key is released.
   *
   * @type {function}
   */
e.prototype._upHandler=s.noop,
/*!
   * The function to be invoked when the key is pressed.
   *
   * @type {function}
   */
e.prototype._pressHandler=s.noop,e.prototype.isDown=function(){return-1!==s.indexOf(l,this.keyCode)},e.prototype.down=function(e){t(this,"_downHandler",e,this.cachedKeypressEvent)},e.prototype.up=function(e,i){t(this,"_upHandler",e,i)},e.prototype.press=function(e,i){this.cachedKeypressEvent=i,t(this,"_pressHandler",e,i)},e.prototype.unbindDown=function(){this._downHandler=s.noop},e.prototype.unbindUp=function(){this._upHandler=s.noop},e.prototype.unbindPress=function(){this._pressHandler=s.noop},e}(),d=function(e){"use strict";var t={};t.Key=c;var i=!1,o=Date.now?Date.now:function(){return+new Date},l=o();return t.tick=function(){var i,o=e.length;for(i=0;i<o;i++){var n=e[i],s=a[n];s&&t[s].down()}},t.run=function(e){i=!0;var r=o(),a=r-l;s.requestAnimationFrame.call(n,(function(){i&&(t.run(e),e(a,r))})),l=r},t.stop=function(){i=!1},s.forEach(r,(function(e,i){t[i]=new c(e)})),s.documentOn("keydown",(function(i){var o=i.keyCode,n=a[o],r=s.pushUnique(e,o),l=t[n];if(l){var c=l.cachedKeypressEvent||{};(c.ctrlKey||c.shiftKey||c.metaKey)&&(r=!0),r&&l.press(null,i)}})),s.documentOn("keyup",(function(i){var o=s.removeValue(e,i.keyCode),n=a[o];n&&t[n].up(null,i)})),s.documentOn("blur",(function(i){s.forEach(e,(function(e){var i=a[e];i&&t[i].up()})),e.length=0})),t}(l);"object"==typeof e.exports?e.exports=d:void 0===(o=function(){return d}.call(t,i,t,e))||(e.exports=o)}(window)},function(e,t,i){"use strict";var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=o(i(0)),r=i(4),a=n(i(2)).default.physics.collision;var l=0;class c{constructor(e){this.player=e,this.name="Unknown",this.fireRange=1/0,this.fireRate=5,this.spread=Math.PI/20,this.nbShoot=1,this.shootSpeed=30,this.shootDamage=20,this.maxAmmo=20,this.ammoSize=2,this.reloadTime=1e3,this.nbAmmo=this.maxAmmo,this.isReloading=!1,this.canShoot=!0,this.autofire=!1}shoot(e=!1){if(this.isReloading||!this.canShoot)return;if(e&&!this.autofire)return;if(0==this.nbAmmo)return this.reload(),null;let{x:t,y:i}=this.player.playerArm.vertices[2];this.recoil=this.shootDamage*this.nbShoot/175,s.Body.applyForce(this.player.body,this.player.pos,{x:-this.recoil*Math.cos(this.player.angle),y:-this.recoil*Math.sin(this.player.angle)});const o=new d(t,i,this.player.angle,this.shootDamage,this.shootSpeed,this.ammoSize,this);this.nbAmmo-=1,this.canShoot=!1;new r.Cooldown(1e3/this.fireRate,()=>{this.canShoot=!0});return e||(this.autofire=!0),this.autofire&&new r.Cooldown(1e3/this.fireRate,()=>this.shoot(!0)),o}stopShoot(){this.autofire=!1}singleShoot(){this.shoot(),this.stopShoot()}reload(){this.isReloading=!0;new r.Cooldown(this.reloadTime,()=>{this.nbAmmo=this.maxAmmo,this.isReloading=!1})}}t.Weapon=c;class d{constructor(e,t,i,o,n,r,c){this.id=1e3+l,l++,this.x=e,this.y=t,this.dir=i,this.damage=o,this.speed=n,this.size=r,this.weapon=c,this.player=this.weapon.player,this.env=this.player.env,this.body=s.Bodies.rectangle(this.x,this.y,this.size*this.env.relToAbs/3,6,{label:"Shot",id:this.id,friction:0,angle:this.dir,collisionFilter:{group:a.collisionGroup.shot,category:a.collisionCategory.shot,mask:a.collisionMask.shot}}),s.Body.setInertia(this.body,1/0),this.env.addShot(this)}update(){let e=this.env.timescale;const t=this.speed*e;s.Body.translate(this.body,{x:Math.cos(this.dir)*t,y:Math.sin(this.dir)*t}),this.x=this.body.position.x,this.y=this.body.position.y,(this.x>this.env.mapWidth||this.x<-500||this.y>this.env.mapHeight||this.y<0)&&this.destroy()}destroy(){this.env.shots=this.env.shots.filter(e=>e.id!==this.id),s.World.remove(this.env.world,this.body)}}t.Shot=d;t.AR=class extends c{constructor(e){super(e),this.name="AR",this.fireRange=1/0,this.fireRate=5,this.spread=Math.PI/20,this.nbShoot=1,this.shootSpeed=30,this.shootDamage=20,this.maxAmmo=10,this.ammoSize=2,this.reloadTime=800}};t.SMG=class extends c{constructor(e){super(e),this.name="SMG",this.fireRange=900,this.fireRate=10,this.spread=Math.PI/10,this.nbShoot=1,this.shootSpeed=50,this.shootDamage=15,this.maxAmmo=30,this.ammoSize=1,this.reloadTime=750}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i(1),n=i(4),s=i(3);class r{constructor(e,t){this.id=t.particles.length+1,this.env=t,this.pos={x:e.x,y:e.y},this.angle=Math.PI/2+Math.random()*Math.PI,this.velocity=new o.Vector(5*Math.random()*Math.cos(this.angle),5*Math.random()*Math.sin(this.angle)),this.color="red",this.opacity=255*Math.random(),this.radius=3,this.env.particles.push(this)}update(){this.velocity.y+=1,this.pos.x+=this.velocity.x*this.env.timescale,this.pos.y+=this.velocity.y*this.env.timescale}render(e){let t=new s.RenderObject("circle",this.pos.x,this.pos.y,{radius:this.radius});e.addToRenderingStack(t)}}t.Particle=r;t.Blood=class extends r{constructor(e,t){super(e,t)}};t.ParticuleGenerator=class{constructor(e,t,i,o){this.pos=t,this.lifeDuration=i,this.particles=[],this.env=o;for(let t=0;t<e;t++){let e=new r(this.pos,this.env);this.particles.push(e)}new n.Cooldown(this.lifeDuration*this.env.timescale,()=>this.destroy())}destroy(){const e=this.particles.map(e=>e.id);this.env.particles=this.env.particles.filter(t=>!e.includes(t.id))}}},function(e){e.exports=JSON.parse('{"player_name":"Player 1","keybind":{"move_forward":["D","RIGHT"],"move_backward":["Q","LEFT"],"jump":["Z","SPACE","UP"],"crouch":["S","DOWN"],"dash":"SHIFT","reload":"R"}}')},function(e){e.exports=JSON.parse('{"canvasBackground":"#E3EEFC"}')},function(e,t,i){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=i(1),s=i(8),r=o(i(2)).default.physics.collision;t.Map=class{constructor(e){this.file=e,this.tileWidth=Math.min(parseInt(this.file.grid.width),parseInt(this.file.grid.height)),this.objects=this.file.objects,this.dimensions={width:parseInt(this.file.dimensions.width),height:parseInt(this.file.dimensions.height)},this.grid=new s.Grid(this.dimensions.height,this.dimensions.width)}init(e){for(let t of this.objects){let[i,o,s,a,l,...c]=t.split(/[\s,]+/);if("format"!=i){let[t,d,h,u]=[parseInt(o),parseInt(s),parseInt(a),parseInt(l)],p={label:"Wall",friction:1e-4,chamfer:{radius:0},mass:5,isStatic:c.includes("static"),frictionStatic:.1,collisionFilter:{group:r.collisionGroup.wall,category:r.collisionCategory.wall,mask:r.collisionMask.wall}};new n.MapElement(this,i,t,d,h,u,e,p)}}this.grid.defineNeighboors()}}},function(e,t,i){"use strict";var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=o(i(0)),r=i(1),a=i(6),l=n(i(2)),c=l.default.physics.collision;class d extends a.Entity{constructor(e,t,i,o,n,s){super(e,new r.Vector(t+o/2,i+n/2),o,n,s),this.createBody(),this.env.addEntity(this)}createBody(){const e=1*this.height/3,t=2*this.height/3,i=1*this.height/3;this.crouchOffset=parseFloat((1.5*this.height/6).toFixed(2)),this.playerHead=s.Bodies.circle(this.pos.x,this.pos.y-e,this.width/2,{label:"PlayerCircle",render:{fillStyle:"red"}}),this.playerBody=s.Bodies.rectangle(this.pos.x,this.pos.y,this.width,t/2,{label:"PlayerRect",render:{fillStyle:"blue"}}),this.insideLegs=s.Bodies.rectangle(this.pos.x,this.pos.y+i,this.width,t/2,{label:"PlayerRect",render:{fillStyle:"green"}}),this.jumpSensor=s.Bodies.rectangle(this.pos.x,this.pos.y+this.height/2,this.width,4,{sleepThreshold:9e10,label:"PlayerRect",isSensor:!0,render:{fillStyle:"yellow"}}),this.playerLegs=s.Body.create({parts:[this.insideLegs,this.jumpSensor],label:"ComposedBody",restitution:.2}),this.playerArm=s.Bodies.rectangle(this.pos.x+this.width-5,this.playerBody.position.y,2*this.width/3,10,{label:"PlayerRect",inertia:1/0,sleepThreshold:1/0,collisionFilter:{group:c.collisionGroup.arm,category:c.collisionCategory.arm,mask:c.collisionMask.arm}});let o=[this.playerBody,this.playerHead,this.playerLegs,this.jumpSensor];this.idArray=o.concat([this.playerArm]).map(e=>e.id),this.body=s.Body.create({parts:[this.playerBody,this.playerHead,this.playerLegs,this.jumpSensor],inertia:1/0,friction:.01,frictionAir:.01,frictionStatic:.25,restitution:.14,sleepThreshold:1/0,collisionFilter:{group:c.collisionGroup.body,category:c.collisionCategory.body,mask:c.collisionMask.body}});let n=s.Constraint.create({bodyA:this.body,pointA:{x:this.width/2-5,y:0},bodyB:this.playerArm,pointB:{x:-this.width/2,y:0},stiffness:.2,length:0});this.composite=s.Composite.create({label:"Player",bodies:[this.body,this.playerArm],constraints:[n]})}}t.Enemy=d},function(e){e.exports=JSON.parse('{"name":"Map 1","dimensions":{"width":"100","height":"25"},"grid":{"width":"36","height":"18"},"objects":["format type       x     y     w     h    inertie    name","rect      0    17    90    2     static     floor","rect      2    10     2    1     static     plateform-1","rect     22    10     1    1     static     plateform-2","rect     12     3     1   11     static     vertical-2","rect     18     3     1   11     static     vertical-1","rect      6     3     6    1     static     horizontal-1","rect     19     3     6    1     static     horizontal-2","rect      0    15     1    2     static     left-block","rect     29    15     1    2     static     right-block","rect     40    10     2    1     static     plateform-3","rect     44     8     3    1     static     plateform-4","rect     52     4     1   10     static     vertical-3","rect     56     4     1   10     static     vertical-4"]}')}]);